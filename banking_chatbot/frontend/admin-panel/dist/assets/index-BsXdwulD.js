import{r as J,a as K,g as Y,b as p,u as q,c as Z,B as Q,R as X,d as T,N as G,e as ee}from"./vendor-h6ieUCCf.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();var $={exports:{}},M={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U;function se(){if(U)return M;U=1;var t=J(),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(l,i,o){var N,m={},b=null,h=null;o!==void 0&&(b=""+o),i.key!==void 0&&(b=""+i.key),i.ref!==void 0&&(h=i.ref);for(N in i)n.call(i,N)&&!c.hasOwnProperty(N)&&(m[N]=i[N]);if(l&&l.defaultProps)for(N in i=l.defaultProps,i)m[N]===void 0&&(m[N]=i[N]);return{$$typeof:a,type:l,key:b,ref:h,props:m,_owner:r.current}}return M.Fragment=s,M.jsx=d,M.jsxs=d,M}var O;function ae(){return O||(O=1,$.exports=se()),$.exports}var e=ae(),I={},z;function te(){if(z)return I;z=1;var t=K();return I.createRoot=t.createRoot,I.hydrateRoot=t.hydrateRoot,I}var ne=te();const ie=Y(ne),re=({user:t,onLogout:a})=>{const[s,n]=p.useState(!1),[r,c]=p.useState(!1),[d,l]=p.useState(!1),[i,o]=p.useState([{id:1,type:"ticket",message:"Nuevo ticket #1234 asignado",time:"5 min",unread:!0},{id:2,type:"message",message:"Cliente esperando respuesta",time:"10 min",unread:!0},{id:3,type:"system",message:"Sistema actualizado",time:"1 hora",unread:!1}]),N=p.useRef(null),m=p.useRef(null),b=i.filter(x=>x.unread).length;p.useEffect(()=>{const j=localStorage.getItem("theme")==="dark";l(j),h(j)},[]);const h=x=>{x?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme")};p.useEffect(()=>{const x=j=>{N.current&&!N.current.contains(j.target)&&n(!1),m.current&&!m.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const f=()=>{const x=!d;l(x),h(x),localStorage.setItem("theme",x?"dark":"light"),n(!1)},y=x=>{o(i.map(j=>j.id===x?{...j,unread:!1}:j))},v=()=>{o(i.map(x=>({...x,unread:!1})))},g=x=>{switch(x){case"ticket":return"üé´";case"message":return"üí¨";case"system":return"‚öôÔ∏è";default:return"üîî"}};return e.jsxs("header",{className:"admin-header",children:[e.jsx("div",{className:"header-left",children:e.jsxs("div",{className:"brand",children:[e.jsx("span",{className:"brand-icon",children:"üè¶"}),e.jsx("span",{className:"brand-text",children:"Banking ChatBot"})]})}),e.jsx("div",{className:"header-center",children:e.jsxs("div",{className:"search-bar",children:[e.jsx("span",{className:"search-icon",children:"üîç"}),e.jsx("input",{type:"text",placeholder:"Buscar tickets, clientes, conversaciones...",className:"search-input"})]})}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"header-item",ref:m,children:[e.jsxs("button",{className:"icon-button",onClick:()=>c(!r),children:["üîî",b>0&&e.jsx("span",{className:"notification-badge",children:b})]}),r&&e.jsxs("div",{className:"dropdown-menu notifications-menu",children:[e.jsxs("div",{className:"dropdown-header",children:[e.jsx("h4",{children:"Notificaciones"}),b>0&&e.jsx("button",{className:"link-button",onClick:v,children:"Marcar todas como le√≠das"})]}),e.jsx("div",{className:"notifications-list",children:i.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No hay notificaciones"})}):i.map(x=>e.jsxs("div",{className:`notification-item ${x.unread?"unread":""}`,onClick:()=>y(x.id),children:[e.jsx("span",{className:"notification-icon",children:g(x.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsx("p",{className:"notification-message",children:x.message}),e.jsx("span",{className:"notification-time",children:x.time})]}),x.unread&&e.jsx("span",{className:"unread-dot"})]},x.id))}),e.jsx("div",{className:"dropdown-footer",children:e.jsx("button",{className:"link-button",children:"Ver todas"})})]})]}),e.jsxs("div",{className:"header-item",ref:N,children:[e.jsxs("button",{className:"user-button",onClick:()=>n(!s),children:[e.jsx("div",{className:"user-avatar",children:t?.avatar?e.jsx("img",{src:t.avatar,alt:t.name}):e.jsx("span",{children:t?.name?.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{className:"user-info",children:[e.jsx("span",{className:"user-name",children:t?.name||"Usuario"}),e.jsx("span",{className:"user-role",children:t?.role||"Agente"})]}),e.jsx("span",{className:"dropdown-arrow",children:"‚ñº"})]}),s&&e.jsxs("div",{className:"dropdown-menu user-menu",children:[e.jsxs("div",{className:"user-menu-header",children:[e.jsx("div",{className:"user-avatar large",children:t?.avatar?e.jsx("img",{src:t.avatar,alt:t.name}):e.jsx("span",{children:t?.name?.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"user-menu-name",children:t?.name||"Usuario"}),e.jsx("p",{className:"user-menu-email",children:t?.email||"email@example.com"})]})]}),e.jsx("div",{className:"menu-divider"}),e.jsxs("button",{className:"menu-item dark-mode-toggle",onClick:f,children:[e.jsx("span",{children:d?"‚òÄÔ∏è":"üåô"}),d?"Modo Claro":"Modo Oscuro",e.jsx("div",{className:`toggle-switch-small ${d?"active":""}`,children:e.jsx("span",{className:"toggle-slider"})})]}),e.jsxs("button",{className:"menu-item",children:[e.jsx("span",{children:"üë§"})," Mi Perfil"]}),e.jsxs("button",{className:"menu-item",children:[e.jsx("span",{children:"‚öôÔ∏è"})," Configuraci√≥n"]}),e.jsxs("button",{className:"menu-item",children:[e.jsx("span",{children:"‚ùì"})," Ayuda"]}),e.jsx("div",{className:"menu-divider"}),e.jsxs("button",{className:"menu-item danger",onClick:a,children:[e.jsx("span",{children:"üö™"})," Cerrar Sesi√≥n"]})]})]})]})]})},le=({collapsed:t,onToggle:a})=>{const s=q(),n=Z(),r=[{id:"dashboard",icon:"üìä",label:"Dashboard",path:"/dashboard",badge:null},{id:"tickets",icon:"üé´",label:"Tickets",path:"/tickets",badge:12},{id:"conversations",icon:"üí¨",label:"Conversaciones",path:"/conversations",badge:5},{id:"analytics",icon:"üìà",label:"Analytics",path:"/analytics",badge:null},{id:"customers",icon:"üë•",label:"Clientes",path:"/customers",badge:null},{id:"knowledge",icon:"üìö",label:"Base de Conocimiento",path:"/knowledge",badge:null},{id:"settings",icon:"‚öôÔ∏è",label:"Configuraci√≥n",path:"/settings",badge:null}],c=l=>n.pathname===l||n.pathname.startsWith(l+"/"),d=l=>{s(l)};return e.jsxs("aside",{className:`admin-sidebar ${t?"collapsed":""}`,children:[e.jsx("button",{className:"sidebar-toggle",onClick:a,title:t?"Expandir":"Contraer",children:t?"‚ñ∂":"‚óÄ"}),e.jsx("nav",{className:"sidebar-nav",children:e.jsx("ul",{className:"nav-list",children:r.map(l=>e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${c(l.path)?"active":""}`,onClick:()=>d(l.path),title:t?l.label:"",children:[e.jsx("span",{className:"nav-icon",children:l.icon}),!t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"nav-label",children:l.label}),l.badge&&e.jsx("span",{className:"nav-badge",children:l.badge})]})]})},l.id))})}),!t&&e.jsx("div",{className:"sidebar-footer",children:e.jsxs("div",{className:"status-card",children:[e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:"status-dot online"}),e.jsx("span",{className:"status-text",children:"Sistema Operativo"})]}),e.jsxs("div",{className:"status-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Agentes activos"}),e.jsx("span",{className:"stat-value",children:"8/12"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Tiempo de respuesta"}),e.jsx("span",{className:"stat-value",children:"2.3 min"})]})]})]})})]})};class ce extends p.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,s){console.error("Error capturado por ErrorBoundary:",a,s),this.setState({error:a,errorInfo:s})}handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?e.jsx("div",{className:"error-boundary",children:e.jsxs("div",{className:"error-container",children:[e.jsx("div",{className:"error-icon",children:"‚ö†Ô∏è"}),e.jsx("h1",{className:"error-title",children:"¬°Oops! Algo sali√≥ mal"}),e.jsx("p",{className:"error-message",children:"Ha ocurrido un error inesperado. Nuestro equipo ha sido notificado."}),!1,e.jsxs("div",{className:"error-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:this.handleReload,children:"Recargar P√°gina"}),e.jsx("button",{className:"btn btn-secondary",onClick:this.handleGoHome,children:"Ir al Inicio"})]})]})}):this.props.children}}const oe="http://localhost:8000";class de{constructor(){this.baseUrl=`${oe}/api/v1`}getHeaders(){const a=localStorage.getItem("token");return{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}}}async request(a,s={}){const n=`${this.baseUrl}${a}`,r={headers:this.getHeaders(),...s};try{const c=await fetch(n,r);if(c.status===401)throw localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login",new Error("Sesi√≥n expirada");if(!c.ok){const d=await c.json().catch(()=>({}));throw new Error(d.message||`HTTP error! status: ${c.status}`)}return await c.json()}catch(c){throw console.error("API request error:",c),c}}async get(a){return this.request(a,{method:"GET"})}async post(a,s){return this.request(a,{method:"POST",body:JSON.stringify(s)})}async put(a,s){return this.request(a,{method:"PUT",body:JSON.stringify(s)})}async patch(a,s){return this.request(a,{method:"PATCH",body:JSON.stringify(s)})}async delete(a){return this.request(a,{method:"DELETE"})}async upload(a,s,n={}){const r=new FormData;r.append("file",s),Object.keys(n).forEach(i=>{r.append(i,n[i])});const c=localStorage.getItem("token"),d={};c&&(d.Authorization=`Bearer ${c}`);const l=await fetch(`${this.baseUrl}${a}`,{method:"POST",headers:d,body:r});if(!l.ok){const i=await l.json().catch(()=>({}));throw new Error(i.message||"Upload failed")}return await l.json()}}const C=new de,he=[{email:"admin@joxai.com",password:"admin123",user:{id:1,name:"Admin User",email:"admin@joxai.com",role:"admin"}},{email:"agent@joxai.com",password:"agent123",user:{id:2,name:"Agent User",email:"agent@joxai.com",role:"agent"}}];class me{constructor(){this.useMockAuth=!0}async login(a,s){if(this.useMockAuth)return this.mockLogin(a,s);try{const n=await C.post("/auth/login",{email:a,password:s});return n.token&&(localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user))),{success:!0,token:n.token,user:n.user}}catch(n){return{success:!1,message:n.message||"Error al iniciar sesi√≥n"}}}mockLogin(a,s){return new Promise(n=>{setTimeout(()=>{const r=he.find(c=>c.email===a&&c.password===s);if(r){const c="mock-jwt-token-"+Date.now();localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(r.user)),n({success:!0,token:c,user:r.user})}else n({success:!1,message:"Email o contrase√±a incorrectos"})},500)})}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}getCurrentUser(){const a=localStorage.getItem("user");if(a)try{return JSON.parse(a)}catch(s){return console.error("Error parsing user data:",s),null}return null}isAuthenticated(){return!!localStorage.getItem("token")}async verifyToken(){if(this.useMockAuth)return!!localStorage.getItem("token");try{return(await C.get("/auth/verify")).valid}catch{return!1}}async refreshToken(){if(this.useMockAuth)return localStorage.getItem("token");try{const a=await C.post("/auth/refresh");return a.token&&localStorage.setItem("token",a.token),a.token}catch(a){return console.error("Error refreshing token:",a),null}}async changePassword(a,s){if(this.useMockAuth)return{success:!0,message:"Contrase√±a actualizada (mock)"};try{return{success:!0,message:(await C.post("/auth/change-password",{currentPassword:a,newPassword:s})).message}}catch(n){return{success:!1,message:n.message}}}async requestPasswordReset(a){if(this.useMockAuth)return{success:!0,message:"Email de recuperaci√≥n enviado (mock)"};try{return{success:!0,message:(await C.post("/auth/forgot-password",{email:a})).message}}catch(s){return{success:!1,message:s.message}}}async resetPassword(a,s){if(this.useMockAuth)return{success:!0,message:"Contrase√±a restablecida (mock)"};try{return{success:!0,message:(await C.post("/auth/reset-password",{token:a,newPassword:s})).message}}catch(n){return{success:!1,message:n.message}}}async updateProfile(a){if(this.useMockAuth){const n={...this.getCurrentUser(),...a};return localStorage.setItem("user",JSON.stringify(n)),{success:!0,user:n}}try{const s=await C.put("/auth/profile",a),r={...this.getCurrentUser(),...s.user};return localStorage.setItem("user",JSON.stringify(r)),{success:!0,user:r}}catch(s){return{success:!1,message:s.message}}}}const P=new me,ue=()=>{const[t,a]=p.useState({email:"",password:""}),[s,n]=p.useState(""),[r,c]=p.useState(!1),d=q(),l=async i=>{i.preventDefault(),n(""),c(!0);try{const o=await P.login(t.email,t.password);o.success?d("/dashboard"):n(o.message||"Error al iniciar sesi√≥n")}catch(o){n("Error de conexi√≥n. Por favor intenta de nuevo."),console.error("Login error:",o)}finally{c(!1)}};return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-container",children:[e.jsx("h1",{children:"JoxAI Bank Admin"}),s&&e.jsx("div",{className:"error-message",children:s}),e.jsxs("form",{onSubmit:l,children:[e.jsx("input",{type:"email",placeholder:"Email",value:t.email,onChange:i=>a({...t,email:i.target.value}),required:!0,disabled:r}),e.jsx("input",{type:"password",placeholder:"Password",value:t.password,onChange:i=>a({...t,password:i.target.value}),required:!0,disabled:r}),e.jsx("button",{type:"submit",disabled:r,children:r?"Iniciando sesi√≥n...":"Login"})]}),e.jsx("div",{className:"dev-credentials",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Desarrollo:"})," admin@joxai.com / admin123"]})})]})})},xe=({metrics:t,loading:a,timeRange:s})=>{const n=[{title:"Total Tickets",value:t.totalTickets,icon:"üìä",trend:"+12%",trendDirection:"up"},{title:"Active Chats",value:t.activeChats,icon:"üí¨",trend:"+5%",trendDirection:"up"},{title:"Avg Response",value:t.avgResponseTime,icon:"‚è±Ô∏è",trend:"-0.5m",trendDirection:"down"},{title:"Satisfaction",value:t.satisfaction,icon:"‚≠ê",trend:"+0.2",trendDirection:"up"}],r=c=>{console.log(`Card clicked: ${c}`)};return a?e.jsx("div",{className:"metrics-cards",children:[1,2,3,4].map(c=>e.jsxs("div",{className:"metric-card skeleton",children:[e.jsx("div",{className:"skeleton-icon"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"skeleton-line short"}),e.jsx("div",{className:"skeleton-line",style:{width:"70%"}})]})]},c))}):e.jsx("div",{className:"metrics-cards",children:n.map((c,d)=>e.jsxs("div",{className:"metric-card",onClick:()=>r(c.title),role:"button",tabIndex:0,"aria-label":`Ver detalles de ${c.title}`,onKeyPress:l=>{(l.key==="Enter"||l.key===" ")&&r(c.title)},children:[e.jsx("div",{className:"metric-icon",children:c.icon}),e.jsxs("div",{className:"metric-content",children:[e.jsx("h3",{children:c.title}),e.jsx("p",{className:"metric-value",children:c.value}),e.jsx("div",{className:`metric-trend trend-${c.trendDirection}`,children:c.trend})]})]},d))})},je=({data:t,timeRange:a,loading:s})=>{const[n,r]=p.useState("week"),[c,d]=p.useState("week"),[l,i]=p.useState(!1),o={week:[120,150,180,165,200,190,210],month:[1200,1400,1600,1500,1800,2e3,2200,2100,2300,2400,2500,2600],year:[12e3,14e3,16e3,15e3,18e3,2e4,22e3,24e3,26e3,28e3,3e4,32e3]},N={week:{open:45,inProgress:30,resolved:80,closed:120},month:{open:180,inProgress:120,resolved:320,closed:480},year:{open:2160,inProgress:1440,resolved:3840,closed:5760}},m=["Lun","Mar","Mi√©","Jue","Vie","S√°b","Dom"],b=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],h=g=>Math.max(...g),f=g=>g==="week"?m:b,y=(g,x)=>{i(!0),g(x),setTimeout(()=>i(!1),600)},v=g=>{console.log("Activity clicked:",g)};return s?e.jsx("div",{className:"charts-section",children:[1,2,3].map(g=>e.jsxs("div",{className:`chart-card ${g===3?"full-width":""} skeleton`,children:[e.jsxs("div",{className:"chart-header",children:[e.jsx("div",{className:"skeleton-line",style:{width:"40%",height:"24px"}}),e.jsx("div",{className:"chart-controls",children:[1,2,3].map(x=>e.jsx("div",{className:"skeleton-line",style:{width:"60px",height:"32px"}},x))})]}),e.jsx("div",{className:"chart-body",children:e.jsx("div",{className:"skeleton-line",style:{height:"200px"}})})]},g))}):e.jsxs("div",{className:"charts-section",children:[e.jsxs("div",{className:"chart-card",children:[e.jsxs("div",{className:"chart-header",children:[e.jsx("h3",{className:"chart-title",children:"Conversaciones"}),e.jsxs("div",{className:"chart-controls",children:[e.jsx("button",{className:`period-btn ${n==="week"?"active":""}`,onClick:()=>y(r,"week"),"aria-label":"Ver datos de la semana",children:"Semana"}),e.jsx("button",{className:`period-btn ${n==="month"?"active":""}`,onClick:()=>y(r,"month"),"aria-label":"Ver datos del mes",children:"Mes"}),e.jsx("button",{className:`period-btn ${n==="year"?"active":""}`,onClick:()=>y(r,"year"),"aria-label":"Ver datos del a√±o",children:"A√±o"})]})]}),e.jsx("div",{className:"chart-body",children:e.jsx("div",{className:`line-chart ${l?"animating":""}`,children:o[n].map((g,x)=>{const j=h(o[n]),k=g/j*100,S=f(n);return e.jsxs("div",{className:"chart-bar-wrapper",children:[e.jsxs("div",{className:"chart-tooltip",children:[g.toLocaleString()," conversaciones"]}),e.jsx("div",{className:"chart-bar",style:{height:`${k}%`,animationDelay:`${x*.1}s`}}),e.jsx("span",{className:"chart-label",children:S[x]})]},x)})})})]}),e.jsxs("div",{className:"chart-card",children:[e.jsxs("div",{className:"chart-header",children:[e.jsx("h3",{className:"chart-title",children:"Estado de Tickets"}),e.jsxs("div",{className:"chart-controls",children:[e.jsx("button",{className:`period-btn ${c==="week"?"active":""}`,onClick:()=>y(d,"week"),"aria-label":"Ver tickets de la semana",children:"Semana"}),e.jsx("button",{className:`period-btn ${c==="month"?"active":""}`,onClick:()=>y(d,"month"),"aria-label":"Ver tickets del mes",children:"Mes"}),e.jsx("button",{className:`period-btn ${c==="year"?"active":""}`,onClick:()=>y(d,"year"),"aria-label":"Ver tickets del a√±o",children:"A√±o"})]})]}),e.jsx("div",{className:"chart-body",children:e.jsx("div",{className:"stats-grid",children:Object.entries(N[c]).map(([g,x],j)=>{const k=Object.values(N[c]).reduce((u,w)=>u+w,0),S=(x/k*100).toFixed(1),R={open:"#f093fb",inProgress:"#4facfe",resolved:"#43e97b",closed:"#c2e9fb"},D={open:"Abiertos",inProgress:"En Progreso",resolved:"Resueltos",closed:"Cerrados"},L={open:"üìã",inProgress:"üîÑ",resolved:"‚úÖ",closed:"üîí"};return e.jsxs("div",{className:"ticket-stat",style:{animationDelay:`${j*.1}s`},children:[e.jsxs("div",{className:"stat-header",children:[e.jsx("span",{className:"stat-icon",children:L[g]}),e.jsx("div",{className:"stat-indicator",style:{background:R[g]}})]}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:D[g]}),e.jsxs("div",{className:"stat-values",children:[e.jsx("span",{className:"stat-count",children:x.toLocaleString()}),e.jsxs("span",{className:"stat-percentage",children:[S,"%"]})]})]})]},g)})})})]}),e.jsxs("div",{className:"chart-card full-width",children:[e.jsxs("div",{className:"chart-header",children:[e.jsx("h3",{className:"chart-title",children:"Actividad Reciente"}),e.jsx("button",{className:"link-button","aria-label":"Ver toda la actividad",children:"Ver todo ‚Üí"})]}),e.jsx("div",{className:"chart-body",children:e.jsx("div",{className:"activity-list",children:[{type:"ticket",user:"Juan P√©rez",action:"cre√≥ el ticket",item:"#1234",time:"hace 5 min",icon:"üé´",priority:"high"},{type:"message",user:"Mar√≠a Garc√≠a",action:"respondi√≥ en",item:"#1233",time:"hace 12 min",icon:"üí¨",priority:"medium"},{type:"resolved",user:"Carlos L√≥pez",action:"resolvi√≥",item:"#1232",time:"hace 25 min",icon:"‚úÖ",priority:"low"},{type:"escalated",user:"Ana Mart√≠nez",action:"escal√≥",item:"#1231",time:"hace 1 hora",icon:"‚¨ÜÔ∏è",priority:"high"},{type:"closed",user:"Sistema",action:"cerr√≥ autom√°ticamente",item:"#1230",time:"hace 2 horas",icon:"üîí",priority:"low"}].map((g,x)=>e.jsxs("div",{className:`activity-item priority-${g.priority}`,onClick:()=>v(g),role:"button",tabIndex:0,"aria-label":`Actividad: ${g.user} ${g.action} ${g.item}`,onKeyPress:j=>{(j.key==="Enter"||j.key===" ")&&v(g)},children:[e.jsx("span",{className:"activity-icon",children:g.icon}),e.jsxs("div",{className:"activity-content",children:[e.jsxs("p",{className:"activity-text",children:[e.jsx("strong",{children:g.user})," ",g.action," ",e.jsx("span",{className:"activity-highlight",children:g.item})]}),e.jsx("span",{className:"activity-time",children:g.time})]}),e.jsx("div",{className:"activity-priority-indicator"})]},x))})})]})]})},pe=()=>{const[t,a]=p.useState("today"),s={totalTickets:150,activeChats:23,avgResponseTime:"2.5m",satisfaction:4.5,newTickets:12,resolvedTickets:45},n={conversations:{today:[65,78,90,81,56,55,40],week:[120,150,180,165,200,190,210],month:[850,920,780,1100,950,1200,1300,1250,1400,1350,1500,1600]}};return e.jsxs("div",{className:"dashboard-page",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{children:"Dashboard"}),e.jsx("p",{children:"Resumen general del sistema y m√©tricas"})]}),e.jsx("div",{className:"header-controls",children:e.jsxs("select",{value:t,onChange:r=>a(r.target.value),className:"time-range-select",children:[e.jsx("option",{value:"today",children:"Hoy"}),e.jsx("option",{value:"week",children:"Esta Semana"}),e.jsx("option",{value:"month",children:"Este Mes"}),e.jsx("option",{value:"year",children:"Este A√±o"})]})})]}),e.jsx(xe,{metrics:s,loading:!1}),e.jsx(je,{data:n,timeRange:t})]})},ve=({ticket:t,onUpdate:a,onClose:s})=>{const[n,r]=p.useState(t?.status||"open"),[c,d]=p.useState(t?.priority||"medium"),[l,i]=p.useState(t?.assignedTo||""),[o,N]=p.useState(""),[m,b]=p.useState(!1),h=[{value:"open",label:"Abierto",color:"#f093fb"},{value:"in_progress",label:"En Progreso",color:"#4facfe"},{value:"waiting",label:"Esperando",color:"#feca57"},{value:"resolved",label:"Resuelto",color:"#43e97b"},{value:"closed",label:"Cerrado",color:"#95a5a6"}],f=[{value:"low",label:"Baja",color:"#4CAF50"},{value:"medium",label:"Media",color:"#FF9800"},{value:"high",label:"Alta",color:"#F44336"},{value:"urgent",label:"Urgente",color:"#9C27B0"}],y=[{id:1,name:"Juan P√©rez"},{id:2,name:"Mar√≠a Garc√≠a"},{id:3,name:"Carlos L√≥pez"},{id:4,name:"Ana Mart√≠nez"}],v=async()=>{try{await a({id:t.id,status:n,priority:c,assignedTo:l}),alert("Ticket actualizado correctamente")}catch(j){console.error("Error actualizando ticket:",j),alert("Error al actualizar el ticket")}},g=()=>{o.trim()&&(console.log("Agregar nota:",o),N(""),b(!1))},x=j=>new Date(j).toLocaleString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return t?e.jsxs("div",{className:"ticket-detail",children:[e.jsxs("div",{className:"ticket-detail-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("h2",{className:"ticket-id",children:["#",t.id]}),e.jsx("span",{className:"ticket-category",children:t.category})]}),e.jsx("button",{className:"close-button",onClick:s,children:"‚úï"})]}),e.jsxs("div",{className:"ticket-detail-body",children:[e.jsxs("section",{className:"detail-section",children:[e.jsx("h3",{className:"section-title",children:"Informaci√≥n del Ticket"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Estado"}),e.jsx("select",{value:n,onChange:j=>r(j.target.value),className:"status-select",children:h.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Prioridad"}),e.jsx("select",{value:c,onChange:j=>d(j.target.value),className:"priority-select",children:f.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Asignado a"}),e.jsxs("select",{value:l,onChange:j=>i(j.target.value),className:"agent-select",children:[e.jsx("option",{value:"",children:"Sin asignar"}),y.map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Creado"}),e.jsx("span",{className:"info-value",children:x(t.createdAt)})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"√öltima actualizaci√≥n"}),e.jsx("span",{className:"info-value",children:x(t.updatedAt)})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Cliente"}),e.jsx("span",{className:"info-value",children:t.customerName})]})]})]}),e.jsxs("section",{className:"detail-section",children:[e.jsx("h3",{className:"section-title",children:"Descripci√≥n"}),e.jsx("div",{className:"description-box",children:e.jsx("p",{children:t.description||"Sin descripci√≥n"})})]}),e.jsxs("section",{className:"detail-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{className:"section-title",children:"Notas Internas"}),e.jsx("button",{className:"btn-add-note",onClick:()=>b(!m),children:"+ Agregar Nota"})]}),m&&e.jsxs("div",{className:"notes-form",children:[e.jsx("textarea",{value:o,onChange:j=>N(j.target.value),placeholder:"Escribe una nota interna...",rows:"4",className:"notes-textarea"}),e.jsxs("div",{className:"notes-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{b(!1),N("")},children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:g,children:"Guardar Nota"})]})]}),e.jsx("div",{className:"notes-list",children:t.notes&&t.notes.length>0?t.notes.map((j,k)=>e.jsxs("div",{className:"note-item",children:[e.jsxs("div",{className:"note-header",children:[e.jsx("strong",{children:j.author}),e.jsx("span",{className:"note-date",children:x(j.date)})]}),e.jsx("p",{className:"note-content",children:j.content})]},k)):e.jsx("p",{className:"empty-notes",children:"No hay notas internas"})})]}),e.jsxs("section",{className:"detail-section",children:[e.jsx("h3",{className:"section-title",children:"Historial"}),e.jsx("div",{className:"timeline",children:t.history&&t.history.map((j,k)=>e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-marker"}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("p",{className:"timeline-text",children:j.text}),e.jsx("span",{className:"timeline-date",children:x(j.date)})]})]},k))})]})]}),e.jsxs("div",{className:"ticket-detail-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:s,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:v,children:"Guardar Cambios"})]})]}):e.jsx("div",{className:"ticket-detail-empty",children:e.jsx("p",{children:"Selecciona un ticket para ver los detalles"})})},ge=({ticketId:t,messages:a,onSendMessage:s})=>{const[n,r]=p.useState(a||[]),[c,d]=p.useState(""),[l,i]=p.useState(!1),o=p.useRef(null),N=p.useRef(null);p.useEffect(()=>{m()},[n]);const m=()=>{o.current?.scrollIntoView({behavior:"smooth"})},b=async x=>{if(x.preventDefault(),!c.trim())return;const j={id:Date.now(),text:c,sender:"agent",senderName:"T√∫",timestamp:new Date().toISOString(),read:!1};r([...n,j]),d("");try{await s?.(t,c)}catch(k){console.error("Error enviando mensaje:",k)}},h=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),b(x))},f=x=>new Date(x).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),y=x=>{const j=new Date(x),k=new Date,S=new Date(k);return S.setDate(S.getDate()-1),j.toDateString()===k.toDateString()?"Hoy":j.toDateString()===S.toDateString()?"Ayer":j.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})},g=(x=>{const j={};return x.forEach(k=>{const S=y(k.timestamp);j[S]||(j[S]=[]),j[S].push(k)}),j})(n);return e.jsxs("div",{className:"ticket-chat",children:[e.jsxs("div",{className:"chat-header",children:[e.jsxs("div",{className:"header-info",children:[e.jsxs("h3",{children:["Chat del Ticket #",t]}),e.jsxs("span",{className:"chat-status",children:[e.jsx("span",{className:"status-dot online"}),"Cliente en l√≠nea"]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"icon-button",title:"Adjuntar archivo",children:"üìé"}),e.jsx("button",{className:"icon-button",title:"Buscar en chat",children:"üîç"}),e.jsx("button",{className:"icon-button",title:"M√°s opciones",children:"‚ãÆ"})]})]}),e.jsxs("div",{className:"chat-messages",ref:N,children:[Object.entries(g).map(([x,j])=>e.jsxs("div",{children:[e.jsx("div",{className:"date-divider",children:e.jsx("span",{children:x})}),j.map(k=>e.jsxs("div",{className:`message ${k.sender==="agent"?"message-sent":"message-received"}`,children:[k.sender!=="agent"&&e.jsx("div",{className:"message-avatar",children:e.jsx("span",{children:k.senderName?.charAt(0)||"C"})}),e.jsxs("div",{className:"message-content",children:[k.sender!=="agent"&&e.jsx("span",{className:"message-sender",children:k.senderName}),e.jsxs("div",{className:"message-bubble",children:[e.jsx("p",{className:"message-text",children:k.text}),k.attachments&&k.attachments.length>0&&e.jsx("div",{className:"message-attachments",children:k.attachments.map((S,R)=>e.jsxs("div",{className:"attachment",children:["üìé ",S.name]},R))})]}),e.jsxs("div",{className:"message-footer",children:[e.jsx("span",{className:"message-time",children:f(k.timestamp)}),k.sender==="agent"&&e.jsx("span",{className:"message-status",children:k.read?"‚úì‚úì":"‚úì"})]})]})]},k.id))]},x)),l&&e.jsxs("div",{className:"message message-received",children:[e.jsx("div",{className:"message-avatar",children:e.jsx("span",{children:"C"})}),e.jsxs("div",{className:"typing-indicator",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]}),e.jsx("div",{ref:o})]}),e.jsxs("form",{className:"chat-input",onSubmit:b,children:[e.jsx("button",{type:"button",className:"input-button",title:"Emoji",children:"üòä"}),e.jsx("textarea",{value:c,onChange:x=>d(x.target.value),onKeyPress:h,placeholder:"Escribe un mensaje...",className:"message-textarea",rows:"1"}),e.jsx("button",{type:"button",className:"input-button",title:"Adjuntar",children:"üìé"}),e.jsx("button",{type:"submit",className:"send-button",disabled:!c.trim(),children:"‚û§"})]}),e.jsx("div",{className:"chat-info",children:e.jsx("span",{className:"info-text",children:"üí° Presiona Enter para enviar, Shift+Enter para nueva l√≠nea"})})]})},Ne=({filters:t,onFilterChange:a,onReset:s})=>{const[n,r]=p.useState(!0),c=[{value:"all",label:"Todos",count:245},{value:"open",label:"Abiertos",count:45},{value:"in_progress",label:"En Progreso",count:30},{value:"waiting",label:"Esperando",count:15},{value:"resolved",label:"Resueltos",count:80},{value:"closed",label:"Cerrados",count:75}],d=[{value:"all",label:"Todas",color:"#9e9e9e"},{value:"low",label:"Baja",color:"#4CAF50"},{value:"medium",label:"Media",color:"#FF9800"},{value:"high",label:"Alta",color:"#F44336"},{value:"urgent",label:"Urgente",color:"#9C27B0"}],l=[{value:"all",label:"Todas"},{value:"general",label:"General"},{value:"technical",label:"T√©cnico"},{value:"account",label:"Cuenta"},{value:"transaction",label:"Transacciones"},{value:"loan",label:"Pr√©stamos"},{value:"card",label:"Tarjetas"},{value:"complaint",label:"Reclamo"}],i=[{id:"all",name:"Todos los agentes"},{id:"1",name:"Juan P√©rez"},{id:"2",name:"Mar√≠a Garc√≠a"},{id:"3",name:"Carlos L√≥pez"},{id:"4",name:"Ana Mart√≠nez"},{id:"unassigned",name:"Sin asignar"}],o=(m,b)=>{a?.({...t,[m]:b})},N=()=>Object.values(t).some(m=>m!=="all"&&m!=="");return e.jsxs("div",{className:`ticket-filters ${n?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"filters-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h3",{children:"Filtros"}),N()&&e.jsx("span",{className:"active-filters-badge",children:Object.values(t).filter(m=>m!=="all"&&m!=="").length})]}),e.jsxs("div",{className:"header-right",children:[N()&&e.jsx("button",{className:"clear-filters-btn",onClick:s,children:"Limpiar"}),e.jsx("button",{className:"toggle-filters-btn",onClick:()=>r(!n),children:n?"‚ñº":"‚ñ∂"})]})]}),n&&e.jsxs("div",{className:"filters-content",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Buscar"}),e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("span",{className:"search-icon",children:"üîç"}),e.jsx("input",{type:"text",placeholder:"ID, cliente, descripci√≥n...",value:t.search||"",onChange:m=>o("search",m.target.value),className:"filter-search-input"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Estado"}),e.jsx("div",{className:"filter-options",children:c.map(m=>e.jsxs("button",{className:`filter-option ${t.status===m.value?"active":""}`,onClick:()=>o("status",m.value),children:[e.jsx("span",{className:"option-label",children:m.label}),e.jsx("span",{className:"option-count",children:m.count})]},m.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Prioridad"}),e.jsx("div",{className:"priority-filters",children:d.map(m=>e.jsxs("button",{className:`priority-option ${t.priority===m.value?"active":""}`,onClick:()=>o("priority",m.value),children:[e.jsx("span",{className:"priority-indicator",style:{background:m.color}}),m.label]},m.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Categor√≠a"}),e.jsx("select",{value:t.category||"all",onChange:m=>o("category",m.target.value),className:"filter-select",children:l.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Asignado a"}),e.jsx("select",{value:t.assignedTo||"all",onChange:m=>o("assignedTo",m.target.value),className:"filter-select",children:i.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Fecha de creaci√≥n"}),e.jsxs("div",{className:"date-range",children:[e.jsx("input",{type:"date",value:t.dateFrom||"",onChange:m=>o("dateFrom",m.target.value),className:"date-input",placeholder:"Desde"}),e.jsx("span",{className:"date-separator",children:"‚Äî"}),e.jsx("input",{type:"date",value:t.dateTo||"",onChange:m=>o("dateTo",m.target.value),className:"date-input",placeholder:"Hasta"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Ordenar por"}),e.jsxs("select",{value:t.sortBy||"newest",onChange:m=>o("sortBy",m.target.value),className:"filter-select",children:[e.jsx("option",{value:"newest",children:"M√°s recientes"}),e.jsx("option",{value:"oldest",children:"M√°s antiguos"}),e.jsx("option",{value:"priority",children:"Prioridad"}),e.jsx("option",{value:"status",children:"Estado"}),e.jsx("option",{value:"updated",children:"√öltima actualizaci√≥n"})]})]})]})]})},W=({size:t="medium",message:a="",fullScreen:s=!1})=>{const n={small:"spinner-small",medium:"spinner-medium",large:"spinner-large"},r=e.jsxs("div",{className:`loading-spinner ${n[t]}`,children:[e.jsx("div",{className:"spinner-circle",children:e.jsx("div",{className:"spinner-inner"})}),a&&e.jsx("p",{className:"spinner-message",children:a})]});return s?e.jsx("div",{className:"loading-overlay",children:r}):r};class be{async getTickets(a={}){try{const s=new URLSearchParams;Object.keys(a).forEach(c=>{a[c]&&a[c]!=="all"&&s.append(c,a[c])});const n=s.toString(),r=n?`/tickets?${n}`:"/tickets";return await C.get(r)}catch(s){throw console.error("Error fetching tickets:",s),s}}async getTicketById(a){try{return await C.get(`/tickets/${a}`)}catch(s){throw console.error("Error fetching ticket:",s),s}}async createTicket(a){try{return await C.post("/tickets",a)}catch(s){throw console.error("Error creating ticket:",s),s}}async updateTicket(a,s){try{return await C.put(`/tickets/${a}`,s)}catch(n){throw console.error("Error updating ticket:",n),n}}async deleteTicket(a){try{return await C.delete(`/tickets/${a}`)}catch(s){throw console.error("Error deleting ticket:",s),s}}async assignTicket(a,s){try{return await C.post(`/tickets/${a}/assign`,{agentId:s})}catch(n){throw console.error("Error assigning ticket:",n),n}}async changeStatus(a,s){try{return await C.patch(`/tickets/${a}/status`,{status:s})}catch(n){throw console.error("Error changing ticket status:",n),n}}async changePriority(a,s){try{return await C.patch(`/tickets/${a}/priority`,{priority:s})}catch(n){throw console.error("Error changing ticket priority:",n),n}}async getMessages(a){try{return await C.get(`/tickets/${a}/messages`)}catch(s){throw console.error("Error fetching messages:",s),s}}async sendMessage(a,s){try{return await C.post(`/tickets/${a}/messages`,{message:s})}catch(n){throw console.error("Error sending message:",n),n}}async addNote(a,s){try{return await C.post(`/tickets/${a}/notes`,{note:s})}catch(n){throw console.error("Error adding note:",n),n}}async getHistory(a){try{return await C.get(`/tickets/${a}/history`)}catch(s){throw console.error("Error fetching ticket history:",s),s}}async uploadAttachment(a,s){try{return await C.upload(`/tickets/${a}/attachments`,s)}catch(n){throw console.error("Error uploading attachment:",n),n}}async getStatistics(a="week"){try{return await C.get(`/tickets/statistics?period=${a}`)}catch(s){throw console.error("Error fetching statistics:",s),s}}async exportTickets(a={},s="csv"){try{const n=new URLSearchParams({...a,format:s});return await C.get(`/tickets/export?${n.toString()}`)}catch(n){throw console.error("Error exporting tickets:",n),n}}}const F=new be,fe=({tickets:t,selectedTicket:a,onSelectTicket:s})=>!t||t.length===0?e.jsxs("div",{className:"no-tickets",children:[e.jsx("div",{className:"empty-icon",children:"üìã"}),e.jsx("h3",{children:"No hay tickets"}),e.jsx("p",{children:"No se encontraron tickets con los filtros seleccionados"})]}):e.jsx("div",{className:"tickets-list",children:t.map(n=>e.jsxs("div",{className:`ticket-card ${a?.id===n.id?"selected":""}`,onClick:()=>s(n),children:[e.jsxs("div",{className:"ticket-header",children:[e.jsx("h3",{className:"ticket-subject",children:n.subject}),e.jsx("span",{className:`status-badge status-${n.status}`,children:n.status})]}),e.jsxs("div",{className:"ticket-meta",children:[e.jsxs("span",{className:`priority-badge priority-${n.priority}`,children:[n.priority==="high"&&"üî¥",n.priority==="medium"&&"üü°",n.priority==="low"&&"üü¢",n.priority]}),n.category&&e.jsx("span",{className:"category-tag",children:n.category})]}),n.lastMessage&&e.jsx("p",{className:"ticket-preview",children:n.lastMessage}),e.jsxs("div",{className:"ticket-footer",children:[e.jsx("span",{className:"ticket-date",children:new Date(n.createdAt||Date.now()).toLocaleDateString()}),n.assignedTo&&e.jsxs("span",{className:"ticket-agent",children:["üë§ ",n.assignedTo]})]})]},n.id))}),ye=()=>{const[t,a]=p.useState([]),[s,n]=p.useState(null),[r,c]=p.useState("detail"),[d,l]=p.useState(!0),[i,o]=p.useState({status:"all",priority:"all",category:"all",assignedTo:"all",search:"",dateFrom:"",dateTo:"",sortBy:"newest"});p.useEffect(()=>{N()},[i]);const N=async()=>{l(!0);try{const g=await F.getTickets(i);a(g.tickets||[])}catch(g){console.error("Error cargando tickets:",g),a([{id:1,subject:"Consulta de saldo",status:"open",priority:"medium",category:"Consultas",createdAt:new Date().toISOString(),lastMessage:"El cliente pregunta por su saldo disponible",assignedTo:"Agent 1"},{id:2,subject:"Transferencia fallida",status:"pending",priority:"high",category:"Transacciones",createdAt:new Date().toISOString(),lastMessage:"Error al procesar transferencia internacional",assignedTo:"Agent 2"},{id:3,subject:"Actualizaci√≥n de datos",status:"resolved",priority:"low",category:"Perfil",createdAt:new Date().toISOString(),lastMessage:"Cliente solicita cambio de direcci√≥n",assignedTo:"Agent 1"}])}finally{l(!1)}},m=g=>{n(g),c("detail")},b=async g=>{try{await F.updateTicket(g.id,g),a(t.map(x=>x.id===g.id?{...x,...g}:x)),n({...s,...g})}catch(x){throw console.error("Error actualizando ticket:",x),x}},h=()=>{n(null),c("detail")},f=g=>{o(g)},y=()=>{o({status:"all",priority:"all",category:"all",assignedTo:"all",search:"",dateFrom:"",dateTo:"",sortBy:"newest"})},v=async(g,x)=>{try{await F.sendMessage(g,x)}catch(j){throw console.error("Error enviando mensaje:",j),j}};return e.jsxs("div",{className:"tickets-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{children:"Tickets"}),e.jsx("p",{className:"page-subtitle",children:"Gesti√≥n de tickets de soporte"})]}),e.jsxs("div",{className:"header-right",children:[e.jsx("button",{className:"btn-secondary",children:"Estad√≠sticas"}),e.jsx("button",{className:"btn-primary",children:"+ Crear Ticket"})]})]}),e.jsxs("div",{className:"tickets-content",children:[e.jsx("div",{className:"tickets-sidebar",children:e.jsx(Ne,{filters:i,onFilterChange:f,onReset:y})}),e.jsx("div",{className:"tickets-list-container",children:d?e.jsx(W,{size:"medium",message:"Cargando tickets..."}):e.jsx(fe,{tickets:t,selectedTicket:s,onSelectTicket:m})}),e.jsx("div",{className:"tickets-detail-container",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-tabs",children:[e.jsx("button",{className:`tab ${r==="detail"?"active":""}`,onClick:()=>c("detail"),children:"Detalles"}),e.jsx("button",{className:`tab ${r==="chat"?"active":""}`,onClick:()=>c("chat"),children:"Chat"})]}),r==="detail"?e.jsx(ve,{ticket:s,onUpdate:b,onClose:h}):e.jsx(ge,{ticketId:s.id,messages:s.messages||[],onSendMessage:v})]}):e.jsxs("div",{className:"no-ticket-selected",children:[e.jsx("div",{className:"empty-icon",children:"üé´"}),e.jsx("h3",{children:"Selecciona un ticket"}),e.jsx("p",{children:"Elige un ticket de la lista para ver sus detalles"})]})})]})]})},ke=()=>{const[t,a]=p.useState([]),[s,n]=p.useState(null),[r,c]=p.useState(!0),[d,l]=p.useState("all"),[i,o]=p.useState("");p.useEffect(()=>{N()},[d]);const N=async()=>{c(!0);try{await new Promise(g=>setTimeout(g,800));const v=[{id:1,customerName:"Juan P√©rez",status:"active",lastMessage:"Necesito ayuda con mi cuenta, no puedo acceder",timestamp:new Date().toISOString(),unreadCount:2,avatar:null,priority:"high",channel:"whatsapp"},{id:2,customerName:"Mar√≠a Garc√≠a",status:"waiting",lastMessage:"Gracias por la informaci√≥n, fue muy √∫til",timestamp:new Date(Date.now()-36e5).toISOString(),unreadCount:0,avatar:null,priority:"medium",channel:"web"},{id:3,customerName:"Carlos L√≥pez",status:"active",lastMessage:"¬øPueden ayudarme con una transferencia?",timestamp:new Date(Date.now()-18e5).toISOString(),unreadCount:1,avatar:null,priority:"high",channel:"phone"},{id:4,customerName:"Ana Mart√≠nez",status:"closed",lastMessage:"Problema resuelto, muchas gracias",timestamp:new Date(Date.now()-72e5).toISOString(),unreadCount:0,avatar:null,priority:"low",channel:"email"}];a(v)}catch(v){console.error("Error cargando conversaciones:",v)}finally{c(!1)}},m=[{value:"all",label:"Todas",count:48,icon:"üí¨",color:"#667eea"},{value:"active",label:"Activas",count:12,icon:"üü¢",color:"#43e97b"},{value:"waiting",label:"En Espera",count:8,icon:"üü°",color:"#feca57"},{value:"closed",label:"Cerradas",count:25,icon:"‚ö´",color:"#95a5a6"}],b=v=>{switch(v){case"active":return"#43e97b";case"waiting":return"#feca57";case"closed":return"#95a5a6";default:return"#667eea"}},h=v=>{switch(v){case"whatsapp":return"üíö";case"web":return"üåê";case"phone":return"üìû";case"email":return"üìß";default:return"üí¨"}},f=v=>{switch(v){case"high":return"#ff6b6b";case"medium":return"#feca57";case"low":return"#48dbfb";default:return"#95a5a6"}},y=t.filter(v=>d==="all"?!0:v.status===d);return r?e.jsx("div",{className:"conversations-page",children:e.jsx(W,{size:"large",message:"Cargando conversaciones..."})}):e.jsxs("div",{className:"conversations-page",children:[e.jsxs("div",{className:"conversations-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"üí¨ Conversaciones"}),e.jsx("p",{className:"page-subtitle",children:"Gestiona todas las conversaciones en tiempo real con tu equipo"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"üîç Buscar conversaciones...",value:i,onChange:v=>o(v.target.value),className:"search-input"})}),e.jsxs("button",{className:"btn-secondary refresh-btn",children:[e.jsx("span",{className:"btn-icon",children:"üîÑ"}),"Actualizar"]}),e.jsxs("button",{className:"btn-primary new-conversation-btn",children:[e.jsx("span",{className:"btn-icon",children:"‚ûï"}),"Nueva Conversaci√≥n"]})]})]}),e.jsx("div",{className:"conversations-filters",children:m.map(v=>e.jsxs("button",{className:`filter-card ${d===v.value?"active":""}`,onClick:()=>l(v.value),style:{"--filter-color":v.color},children:[e.jsx("div",{className:"filter-icon",children:v.icon}),e.jsxs("div",{className:"filter-content",children:[e.jsx("span",{className:"filter-label",children:v.label}),e.jsx("span",{className:"filter-count",children:v.count})]}),e.jsx("div",{className:"filter-indicator"})]},v.value))}),e.jsxs("div",{className:"conversations-content",children:[e.jsxs("div",{className:"conversations-list-container",children:[e.jsxs("div",{className:"list-header",children:[e.jsx("h3",{children:"Conversaciones Recientes"}),e.jsxs("span",{className:"total-count",children:[y.length," conversaciones"]})]}),e.jsx("div",{className:"conversations-list",children:y.map(v=>e.jsxs("div",{className:`conversation-card ${s?.id===v.id?"selected":""}`,onClick:()=>n(v),children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"customer-info",children:[e.jsxs("div",{className:"avatar-container",children:[e.jsx("div",{className:"conversation-avatar",style:{background:`linear-gradient(135deg, ${b(v.status)}, ${f(v.priority)})`},children:v.customerName.charAt(0)}),e.jsx("div",{className:"status-indicator",style:{backgroundColor:b(v.status)}})]}),e.jsxs("div",{className:"customer-details",children:[e.jsx("h4",{className:"customer-name",children:v.customerName}),e.jsxs("div",{className:"conversation-meta",children:[e.jsx("span",{className:"channel",children:h(v.channel)}),e.jsx("span",{className:"priority-badge",style:{backgroundColor:f(v.priority)},children:v.priority})]})]})]}),e.jsx("div",{className:"conversation-time",children:new Date(v.timestamp).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"card-body",children:e.jsx("p",{className:"last-message",children:v.lastMessage})}),e.jsxs("div",{className:"card-footer",children:[v.unreadCount>0&&e.jsxs("span",{className:"unread-badge",children:[v.unreadCount," no le√≠dos"]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"action-btn",children:"üí¨"}),e.jsx("button",{className:"action-btn",children:"üìã"})]})]})]},v.id))})]}),e.jsx("div",{className:"conversation-detail-panel",children:s?e.jsxs("div",{className:"chat-container",children:[e.jsxs("div",{className:"chat-header",children:[e.jsxs("div",{className:"chat-customer-info",children:[e.jsx("div",{className:"customer-avatar-large",style:{background:`linear-gradient(135deg, ${b(s.status)}, ${f(s.priority)})`},children:s.customerName.charAt(0)}),e.jsxs("div",{className:"customer-details",children:[e.jsx("h3",{children:s.customerName}),e.jsxs("div",{className:"customer-status",children:[e.jsx("span",{className:"status-badge",style:{backgroundColor:b(s.status)},children:s.status}),e.jsxs("span",{className:"channel-info",children:[h(s.channel)," ",s.channel]})]})]})]}),e.jsxs("div",{className:"chat-actions",children:[e.jsx("button",{className:"chat-action-btn",children:"üìû"}),e.jsx("button",{className:"chat-action-btn",children:"üìß"}),e.jsx("button",{className:"chat-action-btn",children:"üîî"}),e.jsx("button",{className:"chat-action-btn",children:"‚ãÆ"})]})]}),e.jsx("div",{className:"chat-messages",children:e.jsxs("div",{className:"empty-chat-state",children:[e.jsx("div",{className:"empty-icon",children:"üí¨"}),e.jsx("h3",{children:"Inicia la conversaci√≥n"}),e.jsxs("p",{children:["Env√≠a un mensaje para comenzar a chatear con ",s.customerName]}),e.jsx("button",{className:"start-chat-btn",children:"‚ú® Comenzar Conversaci√≥n"})]})}),e.jsxs("div",{className:"chat-input-container",children:[e.jsxs("div",{className:"input-actions",children:[e.jsx("button",{className:"input-action-btn",children:"üòä"}),e.jsx("button",{className:"input-action-btn",children:"üìé"}),e.jsx("button",{className:"input-action-btn",children:"üñºÔ∏è"})]}),e.jsx("input",{type:"text",placeholder:"Escribe tu mensaje...",className:"chat-input"}),e.jsx("button",{className:"send-btn",children:"‚û§"})]})]}):e.jsx("div",{className:"no-conversation-selected",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üí¨"}),e.jsx("h3",{children:"Selecciona una conversaci√≥n"}),e.jsx("p",{children:"Elige una conversaci√≥n de la lista para ver los detalles y chatear"}),e.jsx("div",{className:"empty-actions",children:e.jsx("button",{className:"btn-primary",children:"‚ûï Crear Nueva Conversaci√≥n"})})]})})})]})]})},B=()=>{const[t,a]=p.useState("week"),[s,n]=p.useState("conversations"),r={overview:[{label:"Total Conversaciones",value:"2,458",change:"+12.5%",trend:"up",icon:"üí¨"},{label:"Tiempo Prom. Respuesta",value:"2.3 min",change:"-8.2%",trend:"down",icon:"‚è±Ô∏è"},{label:"Tasa de Resoluci√≥n",value:"89.4%",change:"+5.1%",trend:"up",icon:"‚úÖ"},{label:"Satisfacci√≥n Cliente",value:"4.6/5",change:"+0.3",trend:"up",icon:"‚≠ê"}],channels:[{name:"Web Widget",value:1245,percentage:50.6,color:"#667eea"},{name:"WhatsApp",value:734,percentage:29.9,color:"#25D366"},{name:"Email",value:321,percentage:13.1,color:"#EA4335"},{name:"Tel√©fono",value:158,percentage:6.4,color:"#4285F4"}],topIssues:[{issue:"Consulta de saldo",count:456,percentage:18.5,trend:"up"},{issue:"Problemas de acceso",count:342,percentage:13.9,trend:"down"},{issue:"Transferencias",count:298,percentage:12.1,trend:"up"},{issue:"Tarjetas bloqueadas",count:234,percentage:9.5,trend:"stable"},{issue:"Solicitud de pr√©stamo",count:187,percentage:7.6,trend:"up"}],responseTime:{labels:["00:00","04:00","08:00","12:00","16:00","20:00"],data:[3.2,2.8,1.9,2.5,3.1,2.7]}},c=l=>l==="up"?"‚Üó":l==="down"?"‚Üò":"‚Üí",d=l=>l==="up"?"trend-up":l==="down"?"trend-down":"trend-stable";return e.jsxs("div",{className:"analytics-dashboard",children:[e.jsxs("div",{className:"analytics-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h2",{children:"Analytics"}),e.jsx("p",{className:"subtitle",children:"An√°lisis detallado del rendimiento"})]}),e.jsxs("div",{className:"period-selector",children:[e.jsx("button",{className:`period-btn ${t==="day"?"active":""}`,onClick:()=>a("day"),children:"Hoy"}),e.jsx("button",{className:`period-btn ${t==="week"?"active":""}`,onClick:()=>a("week"),children:"Semana"}),e.jsx("button",{className:`period-btn ${t==="month"?"active":""}`,onClick:()=>a("month"),children:"Mes"}),e.jsx("button",{className:`period-btn ${t==="year"?"active":""}`,onClick:()=>a("year"),children:"A√±o"}),e.jsx("button",{className:"period-btn custom",children:"üìÖ Personalizado"})]})]}),e.jsx("div",{className:"metrics-overview",children:r.overview.map((l,i)=>e.jsxs("div",{className:"overview-card",children:[e.jsx("div",{className:"card-icon",children:l.icon}),e.jsxs("div",{className:"card-content",children:[e.jsx("span",{className:"card-label",children:l.label}),e.jsx("h3",{className:"card-value",children:l.value}),e.jsxs("span",{className:`card-change ${d(l.trend)}`,children:[c(l.trend)," ",l.change]})]})]},i))}),e.jsxs("div",{className:"analytics-grid",children:[e.jsxs("div",{className:"analytics-card full-width",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Tiempo de Respuesta Promedio"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"icon-btn",children:"üìä"}),e.jsx("button",{className:"icon-btn",children:"‚ãÆ"})]})]}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"line-chart",children:r.responseTime.data.map((l,i)=>{const o=Math.max(...r.responseTime.data),N=l/o*100;return e.jsxs("div",{className:"chart-column",children:[e.jsxs("div",{className:"chart-tooltip",children:[l," min"]}),e.jsx("div",{className:"chart-bar",style:{height:`${N}%`}}),e.jsx("span",{className:"chart-label",children:r.responseTime.labels[i]})]},i)})})})]}),e.jsxs("div",{className:"analytics-card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{children:"Canales de Comunicaci√≥n"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"channels-chart",children:r.channels.map((l,i)=>e.jsxs("div",{className:"channel-item",children:[e.jsxs("div",{className:"channel-info",children:[e.jsx("div",{className:"channel-indicator",style:{background:l.color}}),e.jsx("span",{className:"channel-name",children:l.name})]}),e.jsxs("div",{className:"channel-stats",children:[e.jsx("span",{className:"channel-value",children:l.value}),e.jsxs("span",{className:"channel-percentage",children:[l.percentage,"%"]})]}),e.jsx("div",{className:"channel-bar-container",children:e.jsx("div",{className:"channel-bar",style:{width:`${l.percentage}%`,background:l.color}})})]},i))})})]}),e.jsxs("div",{className:"analytics-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Principales Problemas"}),e.jsx("button",{className:"link-btn",children:"Ver todo ‚Üí"})]}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"issues-list",children:r.topIssues.map((l,i)=>e.jsxs("div",{className:"issue-item",children:[e.jsx("div",{className:"issue-rank",children:i+1}),e.jsxs("div",{className:"issue-content",children:[e.jsxs("div",{className:"issue-header",children:[e.jsx("span",{className:"issue-name",children:l.issue}),e.jsx("span",{className:`issue-trend ${d(l.trend)}`,children:c(l.trend)})]}),e.jsxs("div",{className:"issue-stats",children:[e.jsxs("span",{className:"issue-count",children:[l.count," casos"]}),e.jsxs("span",{className:"issue-percentage",children:[l.percentage,"%"]})]}),e.jsx("div",{className:"issue-progress",children:e.jsx("div",{className:"progress-bar",style:{width:`${l.percentage*5}%`}})})]})]},i))})})]}),e.jsxs("div",{className:"analytics-card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{children:"Tasa de Resoluci√≥n"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"resolution-stats",children:[e.jsx("div",{className:"stat-circle",children:e.jsxs("svg",{viewBox:"0 0 36 36",className:"circular-chart",children:[e.jsx("path",{className:"circle-bg",d:`M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831`}),e.jsx("path",{className:"circle",strokeDasharray:"89.4, 100",d:`M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831`}),e.jsx("text",{x:"18",y:"20.35",className:"percentage",children:"89.4%"})]})}),e.jsxs("div",{className:"stat-details",children:[e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{className:"stat-label",children:"‚úÖ Resueltos"}),e.jsx("span",{className:"stat-value",children:"2,197"})]}),e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{className:"stat-label",children:"‚è≥ Pendientes"}),e.jsx("span",{className:"stat-value",children:"261"})]}),e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{className:"stat-label",children:"üìä Total"}),e.jsx("span",{className:"stat-value",children:"2,458"})]})]})]})})]}),e.jsxs("div",{className:"analytics-card full-width",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Performance por Agente"}),e.jsx("button",{className:"link-btn",children:"Ver detalles ‚Üí"})]}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"agents-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Agente"}),e.jsx("th",{children:"Conversaciones"}),e.jsx("th",{children:"Tiempo Prom."}),e.jsx("th",{children:"Satisfacci√≥n"}),e.jsx("th",{children:"Tasa Resoluci√≥n"})]})}),e.jsx("tbody",{children:[{name:"Juan P√©rez",conversations:342,avgTime:"2.1 min",satisfaction:4.8,resolution:92},{name:"Mar√≠a Garc√≠a",conversations:318,avgTime:"2.3 min",satisfaction:4.7,resolution:90},{name:"Carlos L√≥pez",conversations:289,avgTime:"2.5 min",satisfaction:4.6,resolution:88},{name:"Ana Mart√≠nez",conversations:256,avgTime:"2.2 min",satisfaction:4.9,resolution:94}].map((l,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"agent-cell",children:[e.jsx("div",{className:"agent-avatar",children:l.name.charAt(0)}),e.jsx("span",{children:l.name})]})}),e.jsx("td",{children:l.conversations}),e.jsx("td",{children:l.avgTime}),e.jsx("td",{children:e.jsxs("span",{className:"rating",children:["‚≠ê ",l.satisfaction]})}),e.jsx("td",{children:e.jsxs("div",{className:"resolution-cell",children:[e.jsxs("span",{children:[l.resolution,"%"]}),e.jsx("div",{className:"mini-progress",children:e.jsx("div",{className:"mini-progress-bar",style:{width:`${l.resolution}%`}})})]})})]},i))})]})})})]})]})]})},Ce=()=>{const[t,a]=p.useState("overview"),s={totalConversations:2458,activeConversations:45,avgDuration:"8.5 min",avgMessagesPerConversation:12.3,escalationRate:"15.2%",abandonmentRate:"5.8%"},n=[{stage:"Iniciadas",count:2458,percentage:100,color:"#667eea"},{stage:"Bot Respondi√≥",count:2401,percentage:97.7,color:"#764ba2"},{stage:"Escaladas",count:374,percentage:15.2,color:"#f093fb"},{stage:"Resueltas",count:2197,percentage:89.4,color:"#43e97b"},{stage:"Abandonadas",count:143,percentage:5.8,color:"#ea4335"}],r=[{intent:"Consulta de saldo",count:456,percentage:18.5,confidence:95},{intent:"Transferencias",count:398,percentage:16.2,confidence:92},{intent:"Problemas de acceso",count:342,percentage:13.9,confidence:88},{intent:"Tarjetas",count:298,percentage:12.1,confidence:90},{intent:"Pr√©stamos",count:234,percentage:9.5,confidence:87},{intent:"Otros",count:730,percentage:29.7,confidence:75}],c=[{hour:"00-04",conversations:45,percentage:1.8},{hour:"04-08",conversations:89,percentage:3.6},{hour:"08-12",conversations:678,percentage:27.6},{hour:"12-16",conversations:892,percentage:36.3},{hour:"16-20",conversations:534,percentage:21.7},{hour:"20-00",conversations:220,percentage:9}];return e.jsxs("div",{className:"conversation-analytics",children:[e.jsxs("div",{className:"analytics-header",children:[e.jsx("h2",{children:"An√°lisis de Conversaciones"}),e.jsxs("div",{className:"view-mode-toggle",children:[e.jsx("button",{className:t==="overview"?"active":"",onClick:()=>a("overview"),children:"Vista General"}),e.jsx("button",{className:t==="detailed"?"active":"",onClick:()=>a("detailed"),children:"Detallado"})]})]}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-box",children:[e.jsx("span",{className:"metric-icon",children:"üí¨"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("span",{className:"metric-label",children:"Total Conversaciones"}),e.jsx("span",{className:"metric-value",children:s.totalConversations})]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("span",{className:"metric-icon",children:"üü¢"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("span",{className:"metric-label",children:"Conversaciones Activas"}),e.jsx("span",{className:"metric-value",children:s.activeConversations})]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("span",{className:"metric-icon",children:"‚è±Ô∏è"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("span",{className:"metric-label",children:"Duraci√≥n Promedio"}),e.jsx("span",{className:"metric-value",children:s.avgDuration})]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("span",{className:"metric-icon",children:"‚úâÔ∏è"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("span",{className:"metric-label",children:"Mensajes Promedio"}),e.jsx("span",{className:"metric-value",children:s.avgMessagesPerConversation})]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("span",{className:"metric-icon",children:"‚¨ÜÔ∏è"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("span",{className:"metric-label",children:"Tasa de Escalaci√≥n"}),e.jsx("span",{className:"metric-value",children:s.escalationRate})]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("span",{className:"metric-icon",children:"üö™"}),e.jsxs("div",{className:"metric-content",children:[e.jsx("span",{className:"metric-label",children:"Tasa de Abandono"}),e.jsx("span",{className:"metric-value",children:s.abandonmentRate})]})]})]}),e.jsxs("div",{className:"analytics-card",children:[e.jsx("h3",{children:"Flujo de Conversaciones"}),e.jsx("div",{className:"conversation-flow",children:n.map((d,l)=>e.jsxs("div",{className:"flow-stage",children:[e.jsxs("div",{className:"stage-header",children:[e.jsx("span",{className:"stage-name",children:d.stage}),e.jsx("span",{className:"stage-count",children:d.count})]}),e.jsx("div",{className:"stage-bar-container",children:e.jsx("div",{className:"stage-bar",style:{width:`${d.percentage}%`,background:d.color},children:e.jsxs("span",{className:"stage-percentage",children:[d.percentage,"%"]})})}),l<n.length-1&&e.jsx("div",{className:"flow-arrow",children:"‚Üì"})]},l))})]}),e.jsxs("div",{className:"analytics-row",children:[e.jsxs("div",{className:"analytics-card half-width",children:[e.jsx("h3",{children:"Distribuci√≥n de Intenciones"}),e.jsx("div",{className:"intent-list",children:r.map((d,l)=>e.jsxs("div",{className:"intent-item",children:[e.jsxs("div",{className:"intent-header",children:[e.jsx("span",{className:"intent-name",children:d.intent}),e.jsx("span",{className:"intent-count",children:d.count})]}),e.jsxs("div",{className:"intent-bars",children:[e.jsx("div",{className:"intent-bar-container",children:e.jsx("div",{className:"intent-bar",style:{width:`${d.percentage*5}%`},children:e.jsxs("span",{className:"bar-label",children:[d.percentage,"%"]})})}),e.jsx("div",{className:"confidence-bar-container",children:e.jsx("div",{className:"confidence-bar",style:{width:`${d.confidence}%`},title:`Confianza: ${d.confidence}%`})})]})]},l))})]}),e.jsxs("div",{className:"analytics-card half-width",children:[e.jsx("h3",{children:"Distribuci√≥n Horaria"}),e.jsx("div",{className:"hourly-chart",children:c.map((d,l)=>{const i=Math.max(...c.map(N=>N.conversations)),o=d.conversations/i*100;return e.jsxs("div",{className:"hour-column",children:[e.jsx("div",{className:"hour-bar-container",children:e.jsx("div",{className:"hour-bar",style:{height:`${o}%`},children:e.jsx("span",{className:"bar-tooltip",children:d.conversations})})}),e.jsxs("div",{className:"hour-info",children:[e.jsx("span",{className:"hour-label",children:d.hour}),e.jsxs("span",{className:"hour-percentage",children:[d.percentage,"%"]})]})]},l)})})]})]}),e.jsxs("div",{className:"analytics-card",children:[e.jsx("h3",{children:"An√°lisis de Sentimiento"}),e.jsx("div",{className:"sentiment-analysis",children:e.jsxs("div",{className:"sentiment-overview",children:[e.jsxs("div",{className:"sentiment-card positive",children:[e.jsx("span",{className:"sentiment-icon",children:"üòä"}),e.jsx("span",{className:"sentiment-label",children:"Positivo"}),e.jsx("span",{className:"sentiment-value",children:"64.3%"}),e.jsx("span",{className:"sentiment-count",children:"1,580 conversaciones"})]}),e.jsxs("div",{className:"sentiment-card neutral",children:[e.jsx("span",{className:"sentiment-icon",children:"üòê"}),e.jsx("span",{className:"sentiment-label",children:"Neutral"}),e.jsx("span",{className:"sentiment-value",children:"28.5%"}),e.jsx("span",{className:"sentiment-count",children:"701 conversaciones"})]}),e.jsxs("div",{className:"sentiment-card negative",children:[e.jsx("span",{className:"sentiment-icon",children:"üòû"}),e.jsx("span",{className:"sentiment-label",children:"Negativo"}),e.jsx("span",{className:"sentiment-value",children:"7.2%"}),e.jsx("span",{className:"sentiment-count",children:"177 conversaciones"})]})]})})]})]})},we=()=>{const[t,a]=p.useState(null),[s,n]=p.useState("conversations"),r=[{id:1,name:"Juan P√©rez",avatar:null,status:"online",conversations:342,avgResponseTime:"2.1 min",satisfaction:4.8,resolutionRate:92,activeTickets:8,totalTickets:156,firstResponseTime:"45 seg",onlineTime:"7.5 hrs"},{id:2,name:"Mar√≠a Garc√≠a",avatar:null,status:"online",conversations:318,avgResponseTime:"2.3 min",satisfaction:4.7,resolutionRate:90,activeTickets:6,totalTickets:142,firstResponseTime:"52 seg",onlineTime:"8.2 hrs"},{id:3,name:"Carlos L√≥pez",avatar:null,status:"away",conversations:289,avgResponseTime:"2.5 min",satisfaction:4.6,resolutionRate:88,activeTickets:5,totalTickets:128,firstResponseTime:"1.1 min",onlineTime:"6.8 hrs"},{id:4,name:"Ana Mart√≠nez",avatar:null,status:"online",conversations:256,avgResponseTime:"2.2 min",satisfaction:4.9,resolutionRate:94,activeTickets:7,totalTickets:118,firstResponseTime:"38 seg",onlineTime:"7.9 hrs"}],d=((o,N)=>[...o].sort((m,b)=>{switch(N){case"conversations":return b.conversations-m.conversations;case"satisfaction":return b.satisfaction-m.satisfaction;case"resolution":return b.resolutionRate-m.resolutionRate;case"responseTime":return parseFloat(m.avgResponseTime)-parseFloat(b.avgResponseTime);default:return 0}}))(r,s),l=o=>{switch(o){case"online":return"#43e97b";case"away":return"#feca57";case"offline":return"#95a5a6";default:return"#95a5a6"}},i=o=>{switch(o){case"online":return"En l√≠nea";case"away":return"Ausente";case"offline":return"Desconectado";default:return"Desconocido"}};return e.jsxs("div",{className:"agent-performance",children:[e.jsxs("div",{className:"performance-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h2",{children:"Performance de Agentes"}),e.jsx("p",{className:"subtitle",children:"Rendimiento individual y m√©tricas de equipo"})]}),e.jsx("div",{className:"header-right",children:e.jsxs("select",{value:s,onChange:o=>n(o.target.value),className:"sort-select",children:[e.jsx("option",{value:"conversations",children:"M√°s conversaciones"}),e.jsx("option",{value:"satisfaction",children:"Mayor satisfacci√≥n"}),e.jsx("option",{value:"resolution",children:"Mayor resoluci√≥n"}),e.jsx("option",{value:"responseTime",children:"Menor tiempo respuesta"})]})})]}),e.jsxs("div",{className:"team-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"üë•"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-label",children:"Agentes Activos"}),e.jsxs("span",{className:"stat-value",children:[r.filter(o=>o.status==="online").length,"/",r.length]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"üí¨"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-label",children:"Conversaciones Totales"}),e.jsx("span",{className:"stat-value",children:r.reduce((o,N)=>o+N.conversations,0)})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"‚≠ê"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-label",children:"Satisfacci√≥n Promedio"}),e.jsx("span",{className:"stat-value",children:(r.reduce((o,N)=>o+N.satisfaction,0)/r.length).toFixed(1)})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"‚úÖ"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-label",children:"Tasa Resoluci√≥n"}),e.jsxs("span",{className:"stat-value",children:[(r.reduce((o,N)=>o+N.resolutionRate,0)/r.length).toFixed(0),"%"]})]})]})]}),e.jsx("div",{className:"agents-grid",children:d.map(o=>e.jsxs("div",{className:`agent-card ${t===o.id?"selected":""}`,onClick:()=>a(o.id),children:[e.jsxs("div",{className:"agent-card-header",children:[e.jsxs("div",{className:"agent-info",children:[e.jsxs("div",{className:"agent-avatar",children:[o.avatar?e.jsx("img",{src:o.avatar,alt:o.name}):e.jsx("span",{children:o.name.charAt(0)}),e.jsx("span",{className:"status-indicator",style:{background:l(o.status)}})]}),e.jsxs("div",{className:"agent-details",children:[e.jsx("h4",{className:"agent-name",children:o.name}),e.jsx("span",{className:"agent-status",children:i(o.status)})]})]}),e.jsx("button",{className:"more-btn",children:"‚ãÆ"})]}),e.jsxs("div",{className:"agent-card-body",children:[e.jsxs("div",{className:"metric-row",children:[e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"Conversaciones"}),e.jsx("span",{className:"metric-value",children:o.conversations})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"Tickets Activos"}),e.jsx("span",{className:"metric-value",children:o.activeTickets})]})]}),e.jsxs("div",{className:"metric-row",children:[e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"Tiempo Respuesta"}),e.jsx("span",{className:"metric-value",children:o.avgResponseTime})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"Primer Respuesta"}),e.jsx("span",{className:"metric-value",children:o.firstResponseTime})]})]}),e.jsxs("div",{className:"satisfaction-row",children:[e.jsx("span",{className:"satisfaction-label",children:"Satisfacci√≥n"}),e.jsx("div",{className:"satisfaction-bar",children:e.jsx("div",{className:"satisfaction-fill",style:{width:`${o.satisfaction/5*100}%`}})}),e.jsxs("span",{className:"satisfaction-value",children:["‚≠ê ",o.satisfaction]})]}),e.jsxs("div",{className:"resolution-row",children:[e.jsx("span",{className:"resolution-label",children:"Tasa de Resoluci√≥n"}),e.jsx("div",{className:"resolution-bar",children:e.jsx("div",{className:"resolution-fill",style:{width:`${o.resolutionRate}%`}})}),e.jsxs("span",{className:"resolution-value",children:[o.resolutionRate,"%"]})]}),e.jsxs("div",{className:"time-online",children:[e.jsx("span",{className:"time-icon",children:"‚è±Ô∏è"}),e.jsxs("span",{children:["Tiempo en l√≠nea hoy: ",e.jsx("strong",{children:o.onlineTime})]})]})]}),e.jsx("div",{className:"agent-card-footer",children:e.jsx("button",{className:"view-details-btn",children:"Ver Detalles ‚Üí"})})]},o.id))}),e.jsxs("div",{className:"comparison-section",children:[e.jsx("h3",{children:"Comparaci√≥n de Performance"}),e.jsx("div",{className:"comparison-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Agente"}),e.jsx("th",{children:"Conversaciones"}),e.jsx("th",{children:"Tiempo Respuesta"}),e.jsx("th",{children:"Satisfacci√≥n"}),e.jsx("th",{children:"Resoluci√≥n"}),e.jsx("th",{children:"Tiempo Online"})]})}),e.jsx("tbody",{children:d.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"table-agent",children:[e.jsx("div",{className:"table-avatar",children:o.name.charAt(0)}),e.jsx("span",{children:o.name})]})}),e.jsx("td",{children:o.conversations}),e.jsx("td",{children:o.avgResponseTime}),e.jsx("td",{children:e.jsxs("span",{className:"table-rating",children:["‚≠ê ",o.satisfaction]})}),e.jsx("td",{children:e.jsxs("div",{className:"table-resolution",children:[e.jsxs("span",{children:[o.resolutionRate,"%"]}),e.jsx("div",{className:"mini-bar",children:e.jsx("div",{className:"mini-bar-fill",style:{width:`${o.resolutionRate}%`}})})]})}),e.jsx("td",{children:o.onlineTime})]},o.id))})]})})]})]})},Se=()=>{const[t,a]=p.useState("overview"),s=[{id:"overview",label:"Vista General",icon:"üìä",description:"M√©tricas globales y tendencias"},{id:"conversations",label:"Conversaciones",icon:"üí¨",description:"An√°lisis detallado de chats"},{id:"agents",label:"Agentes",icon:"üë•",description:"Rendimiento del equipo"}],n=()=>{switch(t){case"overview":return e.jsx(B,{});case"conversations":return e.jsx(Ce,{});case"agents":return e.jsx(we,{});default:return e.jsx(B,{})}};return e.jsxs("div",{className:"analytics-page",children:[e.jsxs("div",{className:"analytics-page-header",children:[e.jsx("h1",{children:"Analytics Dashboard"}),e.jsx("p",{children:"Monitoriza el rendimiento y optimiza tu servicio al cliente con datos en tiempo real"})]}),e.jsx("div",{className:"analytics-tabs",children:s.map(r=>e.jsxs("button",{className:`analytics-tab ${t===r.id?"active":""}`,onClick:()=>a(r.id),children:[e.jsx("span",{className:"tab-icon",children:r.icon}),e.jsxs("div",{className:"tab-content",children:[e.jsx("span",{className:"tab-label",children:r.label}),e.jsx("span",{className:"tab-description",children:r.description})]}),e.jsx("div",{className:"tab-indicator"})]},r.id))}),e.jsxs("div",{className:"analytics-controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsxs("button",{className:"control-btn date-picker",children:[e.jsx("span",{className:"control-icon",children:"üìÖ"}),e.jsx("span",{className:"control-text",children:"√öltimos 7 d√≠as"}),e.jsx("span",{className:"control-arrow",children:"‚åÑ"})]}),e.jsxs("button",{className:"control-btn export-btn",children:[e.jsx("span",{className:"control-icon",children:"üì•"}),e.jsx("span",{className:"control-text",children:"Exportar Reporte"})]})]}),e.jsxs("div",{className:"view-stats",children:[e.jsx("span",{className:"stat-badge",children:"üìà Datos en tiempo real"}),e.jsx("span",{className:"stat-badge",children:"üîÑ Actualizado hace 5 min"})]})]}),e.jsx("div",{className:"analytics-content",children:n()})]})},Te=()=>{const[t]=p.useState([{id:1,name:"Juan P√©rez",email:"juan.perez@email.com",phone:"+1 809-555-0123",totalConversations:15,lastContact:"2024-01-15",status:"active"},{id:2,name:"Mar√≠a Garc√≠a",email:"maria.garcia@email.com",phone:"+1 809-555-0456",totalConversations:8,lastContact:"2024-01-14",status:"active"},{id:3,name:"Carlos Rodr√≠guez",email:"carlos.rodriguez@email.com",phone:"+1 809-555-0789",totalConversations:3,lastContact:"2024-01-10",status:"inactive"},{id:4,name:"Ana L√≥pez",email:"ana.lopez@email.com",phone:"+1 809-555-0321",totalConversations:22,lastContact:"2024-01-16",status:"active"}]),a={customers:"üë•",export:"üìä",new:"‚ú®",search:"üîç",view:"üëÄ",edit:"‚úèÔ∏è"};return e.jsxs("div",{className:"customers-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("h1",{children:[a.customers," Clientes"]}),e.jsx("p",{className:"page-subtitle",children:"Gesti√≥n de clientes y contactos"})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("button",{className:"btn-secondary",children:[a.export," Exportar"]}),e.jsxs("button",{className:"btn-primary",children:[a.new," Nuevo Cliente"]})]})]}),e.jsxs("div",{className:"customers-filters",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("span",{className:"search-icon",children:a.search}),e.jsx("input",{type:"text",placeholder:"Buscar clientes...",className:"search-input"})]}),e.jsxs("select",{className:"filter-select",children:[e.jsx("option",{value:"all",children:"Todos los clientes"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]})]}),e.jsx("div",{className:"customers-table-container",children:e.jsxs("table",{className:"customers-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Cliente"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Tel√©fono"}),e.jsx("th",{children:"Conversaciones"}),e.jsx("th",{children:"√öltimo Contacto"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"customer-cell",children:[e.jsx("div",{className:"customer-avatar",children:s.name.split(" ").map(n=>n[0]).join("")}),e.jsx("span",{className:"customer-name",children:s.name})]})}),e.jsx("td",{className:"customer-email",children:s.email}),e.jsx("td",{className:"customer-phone",children:s.phone}),e.jsx("td",{className:"customer-conversations",children:e.jsx("strong",{children:s.totalConversations})}),e.jsx("td",{className:"customer-last-contact",children:s.lastContact}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${s.status}`,children:s.status==="active"?"Activo":"Inactivo"})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-icon",title:"Ver detalles",children:a.view}),e.jsx("button",{className:"btn-icon",title:"Editar cliente",children:a.edit})]})})]},s.id))})]})})]})},Ae=()=>{const[t]=p.useState([{id:1,title:"C√≥mo realizar una transferencia bancaria",category:"Transacciones",views:1234,lastUpdated:"2024-01-15",status:"published"},{id:2,title:"Requisitos para solicitar un pr√©stamo",category:"Pr√©stamos",views:892,lastUpdated:"2024-01-14",status:"published"},{id:3,title:"Uso seguro de tarjetas de cr√©dito",category:"Tarjetas",views:567,lastUpdated:"2024-01-13",status:"draft"},{id:4,title:"Configuraci√≥n de alertas de seguridad",category:"Seguridad",views:2341,lastUpdated:"2024-01-12",status:"published"}]),a={knowledge:"üìö",import:"üì•",new:"‚ú®",articles:"üìÑ",views:"üëÅÔ∏è",categories:"üìÇ",search:"üîç",edit:"‚úèÔ∏è",view:"üëÄ"};return e.jsxs("div",{className:"knowledge-base-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("h1",{children:[a.knowledge," Base de Conocimiento"]}),e.jsx("p",{className:"page-subtitle",children:"Art√≠culos y documentaci√≥n para el chatbot"})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("button",{className:"btn-secondary",children:[a.import," Importar"]}),e.jsxs("button",{className:"btn-primary",children:[a.new," Nuevo Art√≠culo"]})]})]}),e.jsxs("div",{className:"knowledge-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:a.articles}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-label",children:"Total Art√≠culos"}),e.jsx("span",{className:"stat-value",children:"156"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:a.views}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-label",children:"Vistas Totales"}),e.jsx("span",{className:"stat-value",children:"12,450"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:a.categories}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-label",children:"Categor√≠as"}),e.jsx("span",{className:"stat-value",children:"8"})]})]})]}),e.jsxs("div",{className:"knowledge-filters",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("span",{className:"search-icon",children:a.search}),e.jsx("input",{type:"text",placeholder:"Buscar art√≠culos...",className:"search-input"})]}),e.jsxs("select",{className:"filter-select",children:[e.jsx("option",{value:"all",children:"Todas las categor√≠as"}),e.jsx("option",{value:"transactions",children:"Transacciones"}),e.jsx("option",{value:"loans",children:"Pr√©stamos"}),e.jsx("option",{value:"cards",children:"Tarjetas"}),e.jsx("option",{value:"security",children:"Seguridad"})]})]}),e.jsx("div",{className:"articles-grid",children:t.map(s=>e.jsxs("div",{className:"article-card",children:[e.jsxs("div",{className:"article-header",children:[e.jsx("span",{className:"article-category",children:s.category}),e.jsx("span",{className:`status-badge ${s.status}`,children:s.status==="published"?"Publicado":"Borrador"})]}),e.jsx("h3",{className:"article-title",children:s.title}),e.jsxs("div",{className:"article-footer",children:[e.jsxs("span",{className:"article-views",children:[a.views," ",s.views," vistas"]}),e.jsxs("span",{className:"article-date",children:["Actualizado: ",s.lastUpdated]})]}),e.jsxs("div",{className:"article-actions",children:[e.jsxs("button",{className:"btn-secondary btn-small",children:[a.edit," Editar"]}),e.jsxs("button",{className:"btn-secondary btn-small",children:[a.view," Ver"]})]})]},s.id))})]})},Ee=({config:t,onSave:a})=>{const[s,n]=p.useState({botName:t?.botName||"ChatBot Bancario",welcomeMessage:t?.welcomeMessage||"¬°Hola! ¬øEn qu√© puedo ayudarte hoy?",primaryColor:t?.primaryColor||"#667eea",language:t?.language||"es",timezone:t?.timezone||"America/Santo_Domingo",maxConversationDuration:t?.maxConversationDuration||30,autoEscalationEnabled:t?.autoEscalationEnabled||!1,autoEscalationTimeout:t?.autoEscalationTimeout||5,confidenceThreshold:t?.confidenceThreshold||.7,fallbackMessage:t?.fallbackMessage||"Lo siento, no entend√≠ tu consulta. ¬øPodr√≠as reformularla?",enableTypingIndicator:t?.enableTypingIndicator??!0,enableFileUpload:t?.enableFileUpload??!0,maxFileSize:t?.maxFileSize||10,allowedFileTypes:t?.allowedFileTypes||"image/*, .pdf, .doc, .docx",operatingHours:{enabled:t?.operatingHours?.enabled??!1,start:t?.operatingHours?.start||"09:00",end:t?.operatingHours?.end||"18:00",days:t?.operatingHours?.days||["monday","tuesday","wednesday","thursday","friday"]},offlineMessage:t?.offlineMessage||"Estamos fuera de horario. Nuestro horario es de lunes a viernes de 9:00 AM a 6:00 PM.",enableSentimentAnalysis:t?.enableSentimentAnalysis??!0,enableSpellCheck:t?.enableSpellCheck??!0,maxRetries:t?.maxRetries||3}),[r,c]=p.useState(!1),[d,l]=p.useState("general"),i=(h,f)=>{n(y=>({...y,[h]:f}))},o=(h,f,y)=>{n(v=>({...v,[h]:{...v[h],[f]:y}}))},N=(h,f,y)=>{n(v=>({...v,[h]:{...v[h],[f]:y}}))},m=async()=>{c(!0);try{await a(s),alert("Configuraci√≥n guardada exitosamente")}catch(h){console.error("Error guardando configuraci√≥n:",h),alert("Error al guardar la configuraci√≥n")}finally{c(!1)}},b=[{value:"monday",label:"Lunes"},{value:"tuesday",label:"Martes"},{value:"wednesday",label:"Mi√©rcoles"},{value:"thursday",label:"Jueves"},{value:"friday",label:"Viernes"},{value:"saturday",label:"S√°bado"},{value:"sunday",label:"Domingo"}];return e.jsxs("div",{className:"bot-configuration",children:[e.jsxs("div",{className:"config-header",children:[e.jsx("h2",{children:"Configuraci√≥n del Bot"}),e.jsx("button",{className:"btn-save",onClick:m,disabled:r,children:r?"Guardando...":"Guardar Cambios"})]}),e.jsxs("div",{className:"config-tabs",children:[e.jsx("button",{className:`tab ${d==="general"?"active":""}`,onClick:()=>l("general"),children:"General"}),e.jsx("button",{className:`tab ${d==="behavior"?"active":""}`,onClick:()=>l("behavior"),children:"Comportamiento"}),e.jsx("button",{className:`tab ${d==="hours"?"active":""}`,onClick:()=>l("hours"),children:"Horarios"}),e.jsx("button",{className:`tab ${d==="advanced"?"active":""}`,onClick:()=>l("advanced"),children:"Avanzado"})]}),e.jsxs("div",{className:"config-content",children:[d==="general"&&e.jsxs("div",{className:"config-section",children:[e.jsx("h3",{children:"Configuraci√≥n General"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nombre del Bot"}),e.jsx("input",{type:"text",value:s.botName,onChange:h=>i("botName",h.target.value),placeholder:"ChatBot Bancario"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Mensaje de Bienvenida"}),e.jsx("textarea",{value:s.welcomeMessage,onChange:h=>i("welcomeMessage",h.target.value),rows:"3",placeholder:"¬°Hola! ¬øEn qu√© puedo ayudarte hoy?"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color Principal"}),e.jsxs("div",{className:"color-input-group",children:[e.jsx("input",{type:"color",value:s.primaryColor,onChange:h=>i("primaryColor",h.target.value)}),e.jsx("input",{type:"text",value:s.primaryColor,onChange:h=>i("primaryColor",h.target.value),placeholder:"#667eea"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Idioma"}),e.jsxs("select",{value:s.language,onChange:h=>i("language",h.target.value),children:[e.jsx("option",{value:"es",children:"Espa√±ol"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"pt",children:"Portugu√™s"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Zona Horaria"}),e.jsxs("select",{value:s.timezone,onChange:h=>i("timezone",h.target.value),children:[e.jsx("option",{value:"America/Santo_Domingo",children:"Santo Domingo (GMT-4)"}),e.jsx("option",{value:"America/New_York",children:"New York (GMT-5)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Los Angeles (GMT-8)"}),e.jsx("option",{value:"Europe/Madrid",children:"Madrid (GMT+1)"})]})]})]}),d==="behavior"&&e.jsxs("div",{className:"config-section",children:[e.jsx("h3",{children:"Configuraci√≥n de Comportamiento"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Mensaje de Fallback"}),e.jsx("textarea",{value:s.fallbackMessage,onChange:h=>i("fallbackMessage",h.target.value),rows:"3",placeholder:"Mensaje cuando el bot no entiende"}),e.jsx("small",{children:"Mensaje mostrado cuando el bot no puede responder con confianza"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Umbral de Confianza"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:s.confidenceThreshold,onChange:h=>i("confidenceThreshold",parseFloat(h.target.value))}),e.jsxs("span",{className:"range-value",children:[(s.confidenceThreshold*100).toFixed(0),"%"]}),e.jsx("small",{children:"Nivel m√≠nimo de confianza para responder autom√°ticamente"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Duraci√≥n M√°xima de Conversaci√≥n (minutos)"}),e.jsx("input",{type:"number",value:s.maxConversationDuration,onChange:h=>i("maxConversationDuration",parseInt(h.target.value)),min:"5",max:"120"}),e.jsx("small",{children:"Tiempo m√°ximo antes de cerrar una conversaci√≥n inactiva"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Intentos M√°ximos de Reintento"}),e.jsx("input",{type:"number",value:s.maxRetries,onChange:h=>i("maxRetries",parseInt(h.target.value)),min:"1",max:"10"}),e.jsx("small",{children:"N√∫mero de veces que el bot intenta entender antes de escalar"})]}),e.jsxs("div",{className:"toggle-group",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:s.autoEscalationEnabled,onChange:h=>i("autoEscalationEnabled",h.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Escalaci√≥n Autom√°tica"]}),e.jsx("small",{children:"Escalar autom√°ticamente a agente humano despu√©s de cierto tiempo"})]}),s.autoEscalationEnabled&&e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Tiempo para Escalaci√≥n Autom√°tica (minutos)"}),e.jsx("input",{type:"number",value:s.autoEscalationTimeout,onChange:h=>i("autoEscalationTimeout",parseInt(h.target.value)),min:"1",max:"30"})]}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:s.enableTypingIndicator,onChange:h=>i("enableTypingIndicator",h.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Indicador de Escritura"]})}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:s.enableSentimentAnalysis,onChange:h=>i("enableSentimentAnalysis",h.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"An√°lisis de Sentimiento"]})}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:s.enableSpellCheck,onChange:h=>i("enableSpellCheck",h.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Correcci√≥n Ortogr√°fica"]})})]}),d==="hours"&&e.jsxs("div",{className:"config-section",children:[e.jsx("h3",{children:"Horario de Operaci√≥n"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:s.operatingHours.enabled,onChange:h=>o("operatingHours","enabled",h.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Habilitar Horario de Operaci√≥n"]})}),s.operatingHours.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hora de Inicio"}),e.jsx("input",{type:"time",value:s.operatingHours.start,onChange:h=>o("operatingHours","start",h.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hora de Fin"}),e.jsx("input",{type:"time",value:s.operatingHours.end,onChange:h=>o("operatingHours","end",h.target.value)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"D√≠as de Operaci√≥n"}),e.jsx("div",{className:"days-selector",children:b.map(h=>e.jsxs("label",{className:"day-checkbox",children:[e.jsx("input",{type:"checkbox",checked:s.operatingHours.days.includes(h.value),onChange:f=>{const y=f.target.checked?[...s.operatingHours.days,h.value]:s.operatingHours.days.filter(v=>v!==h.value);N("operatingHours","days",y)}}),h.label]},h.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Mensaje Fuera de Horario"}),e.jsx("textarea",{value:s.offlineMessage,onChange:h=>i("offlineMessage",h.target.value),rows:"3"})]})]})]}),d==="advanced"&&e.jsxs("div",{className:"config-section",children:[e.jsx("h3",{children:"Configuraci√≥n Avanzada"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:s.enableFileUpload,onChange:h=>i("enableFileUpload",h.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Permitir Carga de Archivos"]})}),s.enableFileUpload&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Tama√±o M√°ximo de Archivo (MB)"}),e.jsx("input",{type:"number",value:s.maxFileSize,onChange:h=>i("maxFileSize",parseInt(h.target.value)),min:"1",max:"50"})]}),e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Tipos de Archivo Permitidos"}),e.jsx("input",{type:"text",value:s.allowedFileTypes,onChange:h=>i("allowedFileTypes",h.target.value),placeholder:"image/*, .pdf, .doc, .docx"}),e.jsx("small",{children:"Separar por comas"})]})]}),e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("span",{className:"alert-icon",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Atenci√≥n:"})," Los cambios en configuraci√≥n avanzada pueden afectar el rendimiento del bot. Aseg√∫rate de probar en un ambiente de desarrollo primero."]})]})]})]})]})},Re=()=>{const[t,a]=p.useState({systemName:"ChatBot Bancario",systemEmail:"support@banco.com",adminEmail:"admin@banco.com",sessionTimeout:30,maxLoginAttempts:3,passwordMinLength:8,requireStrongPassword:!0,enableTwoFactor:!1,enableIPWhitelist:!1,ipWhitelist:"",emailNotifications:!0,slackNotifications:!1,slackWebhook:"",notifyOnNewTicket:!0,notifyOnEscalation:!0,notifyOnHighPriority:!0,enableBackups:!0,backupFrequency:"daily",backupRetention:30,enableAuditLog:!0,logRetention:90,logLevel:"info",enableWebhooks:!1,webhookUrl:"",webhookEvents:[],cacheEnabled:!0,cacheDuration:3600,maxConcurrentConnections:1e3,rateLimitPerMinute:60}),[s,n]=p.useState("general"),r=(i,o)=>{a(N=>({...N,[i]:o}))},c=async()=>{try{console.log("Guardando configuraci√≥n:",t),alert("Configuraci√≥n guardada exitosamente")}catch(i){console.error("Error guardando configuraci√≥n:",i),alert("Error al guardar la configuraci√≥n")}},d=()=>{if(!t.webhookUrl){alert("Por favor ingresa una URL de webhook");return}alert("Enviando webhook de prueba...")},l=()=>{const i=JSON.stringify(t,null,2),o=new Blob([i],{type:"application/json"}),N=URL.createObjectURL(o),m=document.createElement("a");m.href=N,m.download="system-settings.json",m.click()};return e.jsxs("div",{className:"system-settings",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h2",{children:"Configuraci√≥n del Sistema"}),e.jsx("p",{className:"subtitle",children:"Configuraci√≥n avanzada y par√°metros del sistema"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:l,children:"üì• Exportar"}),e.jsx("button",{className:"btn-primary",onClick:c,children:"üíæ Guardar Cambios"})]})]}),e.jsxs("div",{className:"settings-layout",children:[e.jsx("div",{className:"settings-sidebar",children:e.jsxs("nav",{className:"settings-nav",children:[e.jsx("button",{className:s==="general"?"active":"",onClick:()=>n("general"),children:"üè¢ General"}),e.jsx("button",{className:s==="security"?"active":"",onClick:()=>n("security"),children:"üîí Seguridad"}),e.jsx("button",{className:s==="notifications"?"active":"",onClick:()=>n("notifications"),children:"üîî Notificaciones"}),e.jsx("button",{className:s==="database"?"active":"",onClick:()=>n("database"),children:"üíæ Base de Datos"}),e.jsx("button",{className:s==="logs"?"active":"",onClick:()=>n("logs"),children:"üìã Logs y Auditor√≠a"}),e.jsx("button",{className:s==="integrations"?"active":"",onClick:()=>n("integrations"),children:"üîó Integraciones"}),e.jsx("button",{className:s==="performance"?"active":"",onClick:()=>n("performance"),children:"‚ö° Performance"})]})}),e.jsxs("div",{className:"settings-content",children:[s==="general"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Configuraci√≥n General"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nombre del Sistema"}),e.jsx("input",{type:"text",value:t.systemName,onChange:i=>r("systemName",i.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email del Sistema"}),e.jsx("input",{type:"email",value:t.systemEmail,onChange:i=>r("systemEmail",i.target.value)}),e.jsx("small",{children:"Email usado para enviar notificaciones autom√°ticas"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email del Administrador"}),e.jsx("input",{type:"email",value:t.adminEmail,onChange:i=>r("adminEmail",i.target.value)}),e.jsx("small",{children:"Email para notificaciones cr√≠ticas del sistema"})]})]}),s==="security"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Seguridad"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tiempo de Sesi√≥n (minutos)"}),e.jsx("input",{type:"number",value:t.sessionTimeout,onChange:i=>r("sessionTimeout",parseInt(i.target.value)),min:"5",max:"1440"}),e.jsx("small",{children:"Tiempo de inactividad antes de cerrar sesi√≥n autom√°ticamente"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Intentos M√°ximos de Login"}),e.jsx("input",{type:"number",value:t.maxLoginAttempts,onChange:i=>r("maxLoginAttempts",parseInt(i.target.value)),min:"1",max:"10"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Longitud M√≠nima de Contrase√±a"}),e.jsx("input",{type:"number",value:t.passwordMinLength,onChange:i=>r("passwordMinLength",parseInt(i.target.value)),min:"6",max:"20"})]}),e.jsxs("div",{className:"toggle-group",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.requireStrongPassword,onChange:i=>r("requireStrongPassword",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Requerir Contrase√±a Fuerte"]}),e.jsx("small",{children:"Debe incluir may√∫sculas, min√∫sculas, n√∫meros y caracteres especiales"})]}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.enableTwoFactor,onChange:i=>r("enableTwoFactor",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Autenticaci√≥n de Dos Factores"]})}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.enableIPWhitelist,onChange:i=>r("enableIPWhitelist",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Habilitar Lista Blanca de IPs"]})}),t.enableIPWhitelist&&e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"IPs Permitidas (una por l√≠nea)"}),e.jsx("textarea",{value:t.ipWhitelist,onChange:i=>r("ipWhitelist",i.target.value),rows:"5",placeholder:`192.168.1.1
10.0.0.0/8`})]})]}),s==="notifications"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Notificaciones"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.emailNotifications,onChange:i=>r("emailNotifications",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Notificaciones por Email"]})}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.notifyOnNewTicket,onChange:i=>r("notifyOnNewTicket",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Notificar en Nuevos Tickets"]})}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.notifyOnEscalation,onChange:i=>r("notifyOnEscalation",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Notificar en Escalaciones"]})}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.notifyOnHighPriority,onChange:i=>r("notifyOnHighPriority",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Notificar en Tickets de Alta Prioridad"]})}),e.jsx("div",{className:"divider"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.slackNotifications,onChange:i=>r("slackNotifications",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Notificaciones a Slack"]})}),t.slackNotifications&&e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Slack Webhook URL"}),e.jsx("input",{type:"url",value:t.slackWebhook,onChange:i=>r("slackWebhook",i.target.value),placeholder:"https://hooks.slack.com/services/..."})]})]}),s==="database"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Base de Datos y Respaldos"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.enableBackups,onChange:i=>r("enableBackups",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Habilitar Respaldos Autom√°ticos"]})}),t.enableBackups&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Frecuencia de Respaldo"}),e.jsxs("select",{value:t.backupFrequency,onChange:i=>r("backupFrequency",i.target.value),children:[e.jsx("option",{value:"hourly",children:"Cada hora"}),e.jsx("option",{value:"daily",children:"Diario"}),e.jsx("option",{value:"weekly",children:"Semanal"}),e.jsx("option",{value:"monthly",children:"Mensual"})]})]}),e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Retenci√≥n de Respaldos (d√≠as)"}),e.jsx("input",{type:"number",value:t.backupRetention,onChange:i=>r("backupRetention",parseInt(i.target.value)),min:"1",max:"365"})]})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-secondary",children:"üóÑÔ∏è Crear Respaldo Manual"}),e.jsx("button",{className:"btn-secondary",children:"üì• Restaurar desde Respaldo"})]})]}),s==="logs"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Logs y Auditor√≠a"}),e.jsxs("div",{className:"toggle-group",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.enableAuditLog,onChange:i=>r("enableAuditLog",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Habilitar Log de Auditor√≠a"]}),e.jsx("small",{children:"Registra todas las acciones de los usuarios"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nivel de Log"}),e.jsxs("select",{value:t.logLevel,onChange:i=>r("logLevel",i.target.value),children:[e.jsx("option",{value:"error",children:"Solo Errores"}),e.jsx("option",{value:"warn",children:"Warnings y Errores"}),e.jsx("option",{value:"info",children:"Info, Warnings y Errores"}),e.jsx("option",{value:"debug",children:"Debug (Todo)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Retenci√≥n de Logs (d√≠as)"}),e.jsx("input",{type:"number",value:t.logRetention,onChange:i=>r("logRetention",parseInt(i.target.value)),min:"7",max:"365"})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-secondary",children:"üìã Ver Logs"}),e.jsx("button",{className:"btn-secondary",children:"üì• Descargar Logs"}),e.jsx("button",{className:"btn-danger",children:"üóëÔ∏è Limpiar Logs Antiguos"})]})]}),s==="integrations"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Integraciones"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.enableWebhooks,onChange:i=>r("enableWebhooks",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Habilitar Webhooks"]})}),t.enableWebhooks&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Webhook URL"}),e.jsx("input",{type:"url",value:t.webhookUrl,onChange:i=>r("webhookUrl",i.target.value),placeholder:"https://api.example.com/webhook"})]}),e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Eventos a Enviar"}),e.jsx("div",{className:"checkbox-group",children:[{value:"ticket.created",label:"Ticket Creado"},{value:"ticket.updated",label:"Ticket Actualizado"},{value:"ticket.closed",label:"Ticket Cerrado"},{value:"conversation.started",label:"Conversaci√≥n Iniciada"},{value:"conversation.ended",label:"Conversaci√≥n Finalizada"}].map(i=>e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:t.webhookEvents?.includes(i.value),onChange:o=>{const N=o.target.checked?[...t.webhookEvents||[],i.value]:t.webhookEvents.filter(m=>m!==i.value);r("webhookEvents",N)}}),i.label]},i.value))})]}),e.jsx("button",{className:"btn-secondary",onClick:d,children:"üß™ Probar Webhook"})]})]}),s==="performance"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Performance y Optimizaci√≥n"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:t.cacheEnabled,onChange:i=>r("cacheEnabled",i.target.checked)}),e.jsx("span",{className:"toggle-switch"}),"Habilitar Cach√©"]})}),t.cacheEnabled&&e.jsxs("div",{className:"form-group indent",children:[e.jsx("label",{children:"Duraci√≥n del Cach√© (segundos)"}),e.jsx("input",{type:"number",value:t.cacheDuration,onChange:i=>r("cacheDuration",parseInt(i.target.value)),min:"60",max:"86400"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Conexiones Concurrentes M√°ximas"}),e.jsx("input",{type:"number",value:t.maxConcurrentConnections,onChange:i=>r("maxConcurrentConnections",parseInt(i.target.value)),min:"100",max:"10000"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rate Limit (requests por minuto)"}),e.jsx("input",{type:"number",value:t.rateLimitPerMinute,onChange:i=>r("rateLimitPerMinute",parseInt(i.target.value)),min:"10",max:"1000"})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-secondary",children:"üóëÔ∏è Limpiar Cach√©"}),e.jsx("button",{className:"btn-secondary",children:"üîÑ Reiniciar Sistema"})]})]})]})]})]})},Me=()=>{const[t,a]=p.useState([{id:1,name:"Juan P√©rez",email:"juan.perez@banco.com",role:"admin",status:"active",lastLogin:"2024-01-15 14:30",createdAt:"2023-06-10"},{id:2,name:"Mar√≠a Garc√≠a",email:"maria.garcia@banco.com",role:"agent",status:"active",lastLogin:"2024-01-15 13:45",createdAt:"2023-07-22"},{id:3,name:"Carlos L√≥pez",email:"carlos.lopez@banco.com",role:"agent",status:"active",lastLogin:"2024-01-14 18:20",createdAt:"2023-08-05"},{id:4,name:"Ana Mart√≠nez",email:"ana.martinez@banco.com",role:"supervisor",status:"inactive",lastLogin:"2024-01-10 09:15",createdAt:"2023-09-12"}]),[s,n]=p.useState(!1),[r,c]=p.useState(!1),[d,l]=p.useState(null),[i,o]=p.useState(""),[N,m]=p.useState("all"),[b,h]=p.useState("all"),[f,y]=p.useState({name:"",email:"",role:"agent",password:""}),v=[{value:"admin",label:"Administrador",color:"#9C27B0"},{value:"supervisor",label:"Supervisor",color:"#FF9800"},{value:"agent",label:"Agente",color:"#4CAF50"},{value:"viewer",label:"Observador",color:"#2196F3"}],g={admin:["Acceso completo","Gesti√≥n usuarios","Configuraci√≥n sistema","Ver reportes","Gestionar tickets"],supervisor:["Ver reportes","Gestionar tickets","Asignar agentes","Ver configuraci√≥n"],agent:["Ver tickets asignados","Responder conversaciones","Ver reportes b√°sicos"],viewer:["Ver reportes","Ver tickets","Solo lectura"]},x=t.filter(u=>{const w=u.name.toLowerCase().includes(i.toLowerCase())||u.email.toLowerCase().includes(i.toLowerCase()),V=N==="all"||u.role===N,_=b==="all"||u.status===b;return w&&V&&_}),j=()=>{if(!f.name||!f.email||!f.password){alert("Por favor completa todos los campos");return}const u={id:t.length+1,...f,status:"active",lastLogin:null,createdAt:new Date().toISOString().split("T")[0]};a([...t,u]),y({name:"",email:"",role:"agent",password:""}),n(!1),alert("Usuario agregado exitosamente")},k=()=>{a(t.map(u=>u.id===d.id?d:u)),c(!1),l(null),alert("Usuario actualizado exitosamente")},S=u=>{window.confirm("¬øEst√°s seguro de eliminar este usuario?")&&(a(t.filter(w=>w.id!==u)),alert("Usuario eliminado"))},R=u=>{a(t.map(w=>w.id===u?{...w,status:w.status==="active"?"inactive":"active"}:w))},D=u=>v.find(w=>w.value===u)?.color||"#9e9e9e",L=u=>v.find(w=>w.value===u)?.label||u;return e.jsxs("div",{className:"user-management",children:[e.jsxs("div",{className:"management-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h2",{children:"Gesti√≥n de Usuarios"}),e.jsx("p",{className:"subtitle",children:"Administra los usuarios y sus permisos"})]}),e.jsx("button",{className:"btn-add-user",onClick:()=>n(!0),children:"+ Agregar Usuario"})]}),e.jsxs("div",{className:"filters-bar",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("span",{className:"search-icon",children:"üîç"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:i,onChange:u=>o(u.target.value)})]}),e.jsxs("select",{value:N,onChange:u=>m(u.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"Todos los roles"}),v.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]}),e.jsxs("select",{value:b,onChange:u=>h(u.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]})]}),e.jsxs("div",{className:"users-table-container",children:[e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Usuario"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"√öltimo Acceso"}),e.jsx("th",{children:"Fecha Registro"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:x.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"user-cell",children:[e.jsx("div",{className:"user-avatar",children:u.name.charAt(0)}),e.jsx("span",{children:u.name})]})}),e.jsx("td",{children:u.email}),e.jsx("td",{children:e.jsx("span",{className:"role-badge",style:{background:D(u.role)},children:L(u.role)})}),e.jsx("td",{children:e.jsx("button",{className:`status-toggle ${u.status}`,onClick:()=>R(u.id),children:u.status==="active"?"Activo":"Inactivo"})}),e.jsx("td",{children:u.lastLogin||"Nunca"}),e.jsx("td",{children:u.createdAt}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-icon",onClick:()=>{l({...u}),c(!0)},title:"Editar",children:"‚úèÔ∏è"}),e.jsx("button",{className:"btn-icon",onClick:()=>S(u.id),title:"Eliminar",children:"üóëÔ∏è"})]})})]},u.id))})]}),x.length===0&&e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No se encontraron usuarios"})})]}),s&&e.jsx("div",{className:"modal-overlay",onClick:()=>n(!1),children:e.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Agregar Nuevo Usuario"}),e.jsx("button",{className:"modal-close",onClick:()=>n(!1),children:"‚úï"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nombre Completo"}),e.jsx("input",{type:"text",value:f.name,onChange:u=>y({...f,name:u.target.value}),placeholder:"Juan P√©rez"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:f.email,onChange:u=>y({...f,email:u.target.value}),placeholder:"juan.perez@banco.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rol"}),e.jsx("select",{value:f.role,onChange:u=>y({...f,role:u.target.value}),children:v.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))}),e.jsxs("div",{className:"permissions-preview",children:[e.jsx("strong",{children:"Permisos:"}),e.jsx("ul",{children:g[f.role]?.map((u,w)=>e.jsxs("li",{children:["‚úì ",u]},w))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contrase√±a Temporal"}),e.jsx("input",{type:"password",value:f.password,onChange:u=>y({...f,password:u.target.value}),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),e.jsx("small",{children:"El usuario deber√° cambiar su contrase√±a en el primer acceso"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-cancel",onClick:()=>n(!1),children:"Cancelar"}),e.jsx("button",{className:"btn-submit",onClick:j,children:"Agregar Usuario"})]})]})}),r&&d&&e.jsx("div",{className:"modal-overlay",onClick:()=>c(!1),children:e.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Editar Usuario"}),e.jsx("button",{className:"modal-close",onClick:()=>c(!1),children:"‚úï"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nombre Completo"}),e.jsx("input",{type:"text",value:d.name,onChange:u=>l({...d,name:u.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:d.email,onChange:u=>l({...d,email:u.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rol"}),e.jsx("select",{value:d.role,onChange:u=>l({...d,role:u.target.value}),children:v.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Estado"}),e.jsxs("select",{value:d.status,onChange:u=>l({...d,status:u.target.value}),children:[e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"inactive",children:"Inactivo"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-cancel",onClick:()=>c(!1),children:"Cancelar"}),e.jsx("button",{className:"btn-submit",onClick:k,children:"Guardar Cambios"})]})]})})]})},Pe=()=>{const[t,a]=p.useState("system"),s={botName:"ChatBot Bancario",welcomeMessage:"¬°Hola! ¬øEn qu√© puedo ayudarte hoy?",primaryColor:"#667eea",language:"es",timezone:"America/Santo_Domingo",maxConversationDuration:30,autoEscalationEnabled:!1,autoEscalationTimeout:5,confidenceThreshold:.7,fallbackMessage:"Lo siento, no entend√≠ tu consulta. ¬øPodr√≠as reformularla?",enableTypingIndicator:!0,enableFileUpload:!0,maxFileSize:10,allowedFileTypes:"image/*, .pdf, .doc, .docx",operatingHours:{enabled:!1,start:"09:00",end:"18:00",days:["monday","tuesday","wednesday","thursday","friday"]},offlineMessage:"Estamos fuera de horario. Nuestro horario es de lunes a viernes de 9:00 AM a 6:00 PM.",enableSentimentAnalysis:!0,enableSpellCheck:!0,maxRetries:3},n=async c=>(console.log("Guardando configuraci√≥n del bot:",c),Promise.resolve()),r=c=>{a(c)};return e.jsxs("div",{className:"settings-page",children:[e.jsxs("div",{className:"settings-page-header",children:[e.jsx("h1",{children:"Configuraci√≥n del Sistema"}),e.jsx("p",{children:"Gestiona la configuraci√≥n del sistema, bot y usuarios"})]}),e.jsxs("div",{className:"settings-tabs",children:[e.jsxs("button",{className:`settings-tab ${t==="system"?"active":""}`,onClick:()=>r("system"),"aria-label":"Configuraci√≥n del Sistema",children:[e.jsx("span",{className:"tab-icon",children:"‚öôÔ∏è"}),"Configuraci√≥n del Sistema"]}),e.jsxs("button",{className:`settings-tab ${t==="bot"?"active":""}`,onClick:()=>r("bot"),"aria-label":"Configuraci√≥n del Bot",children:[e.jsx("span",{className:"tab-icon",children:"ü§ñ"}),"Configuraci√≥n del Bot"]}),e.jsxs("button",{className:`settings-tab ${t==="users"?"active":""}`,onClick:()=>r("users"),"aria-label":"Gesti√≥n de Usuarios",children:[e.jsx("span",{className:"tab-icon",children:"üë•"}),"Gesti√≥n de Usuarios"]})]}),e.jsxs("div",{className:"settings-content",children:[t==="system"&&e.jsx(Re,{}),t==="bot"&&e.jsx(Ee,{config:s,onSave:n}),t==="users"&&e.jsx(Me,{})]})]})},Ie="ws://localhost:8000";class De{constructor(){this.ws=null,this.listeners={},this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=3e3,this.isIntentionalClose=!1,this.pingInterval=null}connect(a=null){this.isIntentionalClose=!1;const s=a||localStorage.getItem("token"),n=`${Ie}/ws/admin?token=${s}`;try{this.ws=new WebSocket(n),this.setupEventHandlers(),this.startPingInterval(),console.log("Connecting to Admin WebSocket...")}catch(r){console.error("Error connecting to WebSocket:",r),this.handleReconnect()}}setupEventHandlers(){this.ws.onopen=()=>{console.log("Admin WebSocket connected"),this.reconnectAttempts=0,this.emit("connected")},this.ws.onmessage=a=>{try{const s=JSON.parse(a.data);if(console.log("WebSocket message received:",s),s.type==="pong")return;s.type&&this.emit(s.type,s),this.emit("message",s)}catch(s){console.error("Error parsing WebSocket message:",s)}},this.ws.onerror=a=>{console.error("WebSocket error:",a),this.emit("error",a)},this.ws.onclose=a=>{console.log("WebSocket closed",a.code,a.reason),this.stopPingInterval(),this.emit("disconnected",{code:a.code,reason:a.reason}),!this.isIntentionalClose&&this.reconnectAttempts<this.maxReconnectAttempts&&this.handleReconnect()}}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),this.emit("maxReconnectAttempts");return}this.reconnectAttempts++;const a=this.reconnectDelay*this.reconnectAttempts;console.log(`Reconnecting in ${a}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>{this.connect()},a)}startPingInterval(){this.pingInterval=setInterval(()=>{this.isConnected()&&this.send({type:"ping"})},3e4)}stopPingInterval(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}send(a){this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify(a)):console.warn("WebSocket is not connected")}subscribeToTicket(a){this.send({type:"subscribe",channel:"ticket",ticketId:a})}unsubscribeFromTicket(a){this.send({type:"unsubscribe",channel:"ticket",ticketId:a})}subscribeToStats(){this.send({type:"subscribe",channel:"stats"})}sendTyping(a,s){this.send({type:"typing",ticketId:a,isTyping:s})}on(a,s){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(s)}off(a,s){this.listeners[a]&&(this.listeners[a]=this.listeners[a].filter(n=>n!==s))}emit(a,s){this.listeners[a]&&this.listeners[a].forEach(n=>{try{n(s)}catch(r){console.error(`Error in listener for event ${a}:`,r)}})}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}disconnect(){this.isIntentionalClose=!0,this.stopPingInterval(),this.ws&&(this.ws.close(),this.ws=null),this.listeners={}}}const H=new De,A=({children:t})=>P.isAuthenticated()?t:e.jsx(G,{to:"/login",replace:!0}),E=({children:t})=>{const[a,s]=p.useState(localStorage.getItem("sidebarCollapsed")==="true"),[n,r]=p.useState(null);p.useEffect(()=>{const l=P.getCurrentUser();return r(l),P.isAuthenticated()&&H.connect(),()=>{H.disconnect()}},[]);const c=()=>{const l=!a;s(l),localStorage.setItem("sidebarCollapsed",l)},d=()=>{P.logout()};return e.jsxs("div",{className:`app-container ${a?"sidebar-collapsed":""}`,children:[e.jsx(le,{collapsed:a,onToggle:c}),e.jsxs("div",{className:"main-content",children:[e.jsx(re,{user:n,onLogout:d}),e.jsx("main",{className:"page-container",children:t})]})]})};function Le(){return e.jsx(ce,{children:e.jsx(Q,{children:e.jsxs(X,{children:[e.jsx(T,{path:"/login",element:e.jsx(ue,{})}),e.jsx(T,{path:"/",element:e.jsx(A,{children:e.jsx(G,{to:"/dashboard",replace:!0})})}),e.jsx(T,{path:"/dashboard",element:e.jsx(A,{children:e.jsx(E,{children:e.jsx(pe,{})})})}),e.jsx(T,{path:"/tickets",element:e.jsx(A,{children:e.jsx(E,{children:e.jsx(ye,{})})})}),e.jsx(T,{path:"/conversations",element:e.jsx(A,{children:e.jsx(E,{children:e.jsx(ke,{})})})}),e.jsx(T,{path:"/analytics",element:e.jsx(A,{children:e.jsx(E,{children:e.jsx(Se,{})})})}),e.jsx(T,{path:"/customers",element:e.jsx(A,{children:e.jsx(E,{children:e.jsx(Te,{})})})}),e.jsx(T,{path:"/knowledge",element:e.jsx(A,{children:e.jsx(E,{children:e.jsx(Ae,{})})})}),e.jsx(T,{path:"/settings",element:e.jsx(A,{children:e.jsx(E,{children:e.jsx(Pe,{})})})}),e.jsx(T,{path:"*",element:e.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[e.jsx("h1",{children:"404 - P√°gina no encontrada"}),e.jsx("p",{children:"La p√°gina que buscas no existe."}),e.jsx("a",{href:"/dashboard",children:"Volver al Dashboard"})]})})]})})})}ie.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(Le,{})}));
//# sourceMappingURL=index-BsXdwulD.js.map
